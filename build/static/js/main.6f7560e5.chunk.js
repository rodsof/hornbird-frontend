(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{129:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(29),c=t.n(l),s=(t(92),t(93),t(13)),o=t(32),i=t(72),u=t(57),m=t(44),d=Object(n.createContext)(),p=Object(n.createContext)(),E=function(e){var a=Object(n.useContext)(d),t=a.dashboard,l=a.showDashboard,c=a.hideDashboard,o=Object(n.useContext)(p).cerrarSesion,i=e.tipo,E=!1;localStorage.getItem("token")&&(E=!0);return r.a.createElement("div",{className:"app-header"},E?r.a.createElement("div",{className:"col-1 nopadding"},r.a.createElement("button",{className:"btn btn-faBars",onClick:function(){t?c():l()}},r.a.createElement(u.a,{icon:m.a,size:"3x",color:"white"}))):null,E?r.a.createElement("div",{className:"col-4 nopadding"},r.a.createElement(s.b,{to:"/dashboard"},r.a.createElement("img",{src:"HBTLogo.png",alt:"logo",className:"logo"}))):r.a.createElement("div",{className:"col-4 nopadding"},r.a.createElement("img",{src:"HBTLogo.png",alt:"logo",className:"logo"})),E?r.a.createElement("div",{className:"quatro"},r.a.createElement("p",null,"System FDD, Prediction & Energy Optimization")):r.a.createElement("div",{className:"col-5 nopadding"}),E?null:r.a.createElement("div",{className:"col-1 nopadding"},r.a.createElement("button",{className:"btn btn-link btn-block"},r.a.createElement(s.b,{to:"/sign-in",className:"link"},"SIGN IN"))),E?null:r.a.createElement("div",{className:"col-1 nopadding"},r.a.createElement("button",{className:"btn btn-faBars"},r.a.createElement(u.a,{icon:m.b,size:"3x",color:"white"}))),E&&i?r.a.createElement("div",{className:"col-3 nopadding"},r.a.createElement("button",{className:"btn btn-link btn-block"},r.a.createElement(s.b,{to:"/admin",className:"link"},"Administration"))):null,E?r.a.createElement("div",{className:"col-1 nopadding"},r.a.createElement("button",{className:"btn btn-link btn-block",onClick:function(){return o()}},r.a.createElement(s.b,{to:"",className:"link"},"SIGN OUT"))):null,E?r.a.createElement("div",{className:"col-1 nopadding"},r.a.createElement("button",{className:"btn btn-faBars"},r.a.createElement(u.a,{icon:m.b,size:"3x",color:"white"}))):null)},h=Object(n.createContext)(),g=function(e){Object(n.useContext)(p).autenticado,Object(n.useContext)(h);var a=Object(n.useContext)(h),t=a.alarms,l=a.getAlarms;return t||l(),localStorage.getItem("token")&&e.history.push("/dashboard"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement(E,null)),r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"seccion-principal"},r.a.createElement(i.a,{url:"https://www.ventusky.com/",id:"ventusky",className:"ventusky",display:"block",position:"relative",allow:"geolocation"}))))},b=t(12),f=t(8),v=t(7),y=Object(n.createContext)(),T=function(e){var a=Object(n.useContext)(y),t=a.alerta,l=a.mostrarAlerta,c=Object(n.useContext)(p),o=c.mensaje,i=c.autenticado,u=c.registrarUsuario,m=c.cargando;Object(n.useEffect)((function(){i&&e.history.push("/dashboard"),o&&l(o.msg,o.categoria)}),[o,i,e.history]);var d=Object(n.useState)({name:"",email:"",password:"",confirm:""}),h=Object(v.a)(d,2),g=h[0],T=h[1],O=g.name,C=g.email,N=g.password,w=g.confirm,R=function(e){T(Object(f.a)({},g,Object(b.a)({},e.target.name,e.target.value)))};return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement(E,null)),r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"form-usuario"},t?r.a.createElement("div",{className:"alerta ".concat(t.categoria)}," ",t.msg," "):null,r.a.createElement("div",{className:"contenedor-form sombra-dark"},r.a.createElement("h1",null," CREATE AN ACCOUNT "),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),""!==O.trim()&&""!==C.trim()&&""!==N.trim()&&""!==w.trim()?N.length<6?l("Password must be at least 6 characters long","alerta-error"):N===w?u({name:O,email:C,password:N}):l("Los passwords no son iguales","alerta-error"):l("Please complete all fields","alerta-error")}},r.a.createElement("div",{className:"campo-form"},r.a.createElement("label",{htmlFor:"name"},"Name"),r.a.createElement("input",{type:"text",id:"name",name:"name",placeholder:"Your Name",value:O,onChange:R})),r.a.createElement("div",{className:"campo-form"},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{type:"email",id:"email",name:"email",placeholder:"Your Email",value:C,onChange:R})),r.a.createElement("div",{className:"campo-form"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",id:"password",name:"password",placeholder:"Your Password",value:N,onChange:R})),r.a.createElement("div",{className:"campo-form"},r.a.createElement("label",{htmlFor:"confirm"},"Confirm Password"),r.a.createElement("input",{type:"password",id:"confirm",name:"confirm",placeholder:"Repeat Password",onChange:R})),r.a.createElement("div",{className:"campo-form"},r.a.createElement("button",{type:"submit",className:"btn btn-primario btn-block",onChange:R,disabled:m},m?"Registering...":"Register"))),r.a.createElement(s.b,{to:"/",className:"btn btn-primario btn-block"},"HOME")))))},O=function(e){var a=Object(n.useContext)(y),t=a.alerta,l=a.mostrarAlerta,c=Object(n.useContext)(p),o=c.mensaje,i=c.autenticado,u=c.iniciarSesion;Object(n.useEffect)((function(){i&&e.history.push("/dashboard"),o&&l(o.msg,o.categoria)}),[i,o,e.history]);return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement(E,null)),r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"form-usuario"},t?r.a.createElement("div",{className:"alerta ".concat(t.categoria)}," ",t.msg," "):null,r.a.createElement("div",{className:"contenedor-form sombra-dark"},r.a.createElement("h1",null," SIGN IN "),r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var a=e.currentTarget,t=new FormData(a),n=t.get("email"),r=t.get("password");""!==n.trim()&&""!==r.trim()||l("Please complete all fields","alerta-error"),u({email:n,password:r})}},r.a.createElement("div",{className:"campo-form"},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{type:"email",id:"email",name:"email",placeholder:"Your Email"})),r.a.createElement("div",{className:"campo-form"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",id:"password",name:"password",placeholder:"Your Password"})),r.a.createElement("div",{className:"campo-form"},r.a.createElement("input",{type:"submit",className:"btn btn-primario btn-block",value:"Sign In"}))),r.a.createElement("button",{className:"btn btn-primario btn-block"},r.a.createElement(s.b,{to:"/register",className:"linkSignIn"},"Create Account")),r.a.createElement("button",{className:"btn btn-primario btn-block"},r.a.createElement(s.b,{to:"/",className:"linkSignIn"},"Home"))))))},C=function(){var e=Object(n.useContext)(y),a=e.alerta,t=e.mostrarAlerta,l=Object(n.useContext)(p),c=l.mensaje,s=l.agregarUsuario,o=l.cargando,i=l.getUsers;Object(n.useEffect)((function(){c&&t(c.msg,c.categoria)}),[c]);return r.a.createElement("div",{className:"col"},a?r.a.createElement("div",{className:"alerta ".concat(a.categoria)}," ",a.msg," "):null,r.a.createElement("h1",null," ADD MEMBER "),r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var a=e.currentTarget,n=new FormData(a),r=n.get("name"),l=n.get("email"),c=n.get("password"),o=n.get("confirm");""!==r.trim()&&""!==l.trim()&&""!==c.trim()&&""!==o.trim()?c.length<6?t("Password must be at least 6 characters long","alerta-error"):c===o?(s({name:r,email:l,password:c}),i()):t("Los passwords no son iguales","alerta-error"):t("Please complete all fields","alerta-error")}},r.a.createElement("div",{className:"campo-form"},r.a.createElement("label",{htmlFor:"name"},"Name"),r.a.createElement("input",{type:"text",id:"name",name:"name",placeholder:"Name"})),r.a.createElement("div",{className:"campo-form"},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{type:"email",id:"email",name:"email",placeholder:"Email"})),r.a.createElement("div",{className:"campo-form"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",id:"password",name:"password",placeholder:" Password"})),r.a.createElement("div",{className:"campo-form"},r.a.createElement("label",{htmlFor:"confirm"},"Confirm Password"),r.a.createElement("input",{type:"password",id:"confirm",name:"confirm",placeholder:"Repeat Password"})),r.a.createElement("div",{className:"campo-form"},r.a.createElement("button",{type:"submit",className:"btn btn-primario btn-block",disabled:o},o?"Registering...":"Add member"))))},N=function(e){var a=e.usuario,t=e.currentId,l=Object(n.useContext)(p),c=l.getUsers,s=l.deleteMember;return a._id===t?null:r.a.createElement("li",{className:"tarea sombra"},r.a.createElement("p",null," ",a.name," "),r.a.createElement("div",{className:"acciones"},r.a.createElement("button",{type:"button",className:"btn btn-secundario",onClick:function(){return e=a._id,s(e),void c();var e}},"Delete")))},w=t(139),R=t(130),x=function(e){var a=e.id,t=Object(n.useContext)(p),l=t.usuarios,c=t.getUsers;return Object(n.useEffect)((function(){c()}),[]),r.a.createElement(n.Fragment,null,r.a.createElement("h2",{className:"itemName"}," Members "),r.a.createElement("ul",{className:"listado-tareas"},r.a.createElement(w.a,null,l.map((function(e){return r.a.createElement(R.a,{key:e._id,timeout:200},r.a.createElement(N,{usuario:e,currentId:a}))})))))},A=Object(n.createContext)(),j=Object(n.createContext)(),S=function(e){var a=e.item,t=(e.ai,Object(n.useContext)(A).currentItem),l=Object(n.useContext)(j).getCharts;return r.a.createElement(n.Fragment,null,"Artificial Intelligence"!==a.name?r.a.createElement("li",{className:"sub-menu"},r.a.createElement("a",{href:"#",className:"btn btn-primario btn-block",onClick:function(){return e=a._id,t(e),void l(e);var e}},a.name)):r.a.createElement("li",{className:"active"},r.a.createElement("a",{className:"btn btn-primario btn-block",href:"/"},r.a.createElement("i",{className:"icon_house_alt"}),r.a.createElement("span",null,"Artificial Intelligence"))))},D=t(76),k=t(131),I=t(136),P=t(132),U=t(22),M=t(23),_=t(26),H=t(24),F=t(27),L=t(42),W=t.n(L),B=(t(101),function(e){function a(e){var t;return Object(U.a)(this,a),(t=Object(_.a)(this,Object(H.a)(a).call(this,e))).chartRef=r.a.createRef(),t}return Object(F.a)(a,e),Object(M.a)(a,[{key:"componentDidUpdate",value:function(){this.myChart.data.labels=this.props.data.map((function(e){return e.label})),this.myChart.data.datasets[0].data=this.props.data.map((function(e){return e.value})),this.myChart.options.annotation.annotations[0].value=this.props.data[0]&&this.props.data[0].threshold,this.myChart.update(),console.log("Machine data",this.props.data)}},{key:"componentDidMount",value:function(){console.log("Machine data",this.props.data),this.myChart=new W.a(this.chartRef.current,{type:"line",options:{scales:{xAxes:[],yAxes:[{ticks:{min:0},scaleLabel:{display:!0,labelString:this.props.unit}}]},annotation:{annotations:[{drawTime:"afterDatasetsDraw",id:"hline",type:"line",mode:"horizontal",scaleID:"y-axis-0",value:this.props.data[0]?this.props.data[0].threshold:3.9,borderColor:"red",borderWidth:2}]}},data:{labels:this.props.data.map((function(e){return e.label})),datasets:[{label:this.props.title,data:this.props.data.map((function(e){return e.value})),fill:"none",backgroundColor:this.props.color,pointRadius:2,borderColor:this.props.color,borderWidth:1,lineTension:0}]}})}},{key:"render",value:function(){return r.a.createElement("canvas",{ref:this.chartRef,style:{height:"200px",width:"300px"}})}}]),a}(r.a.Component)),G=function(e){function a(e){var t;return Object(U.a)(this,a),(t=Object(_.a)(this,Object(H.a)(a).call(this,e))).canvasRef=r.a.createRef(),t}return Object(F.a)(a,e),Object(M.a)(a,[{key:"componentDidUpdate",value:function(){this.myChart.data.labels=this.props.data.map((function(e){return e.label})),this.myChart.data.datasets[0].data=this.props.data.map((function(e){return e.value})),this.myChart.update()}},{key:"componentDidMount",value:function(){this.myChart=new W.a(this.canvasRef.current,{type:"bar",options:{maintainAspectRatio:!1,scales:{xAxes:[{ticks:{autoSkip:!0,maxTicksLimit:14}}],yAxes:[{ticks:{min:0},scaleLabel:{display:!0,labelString:this.props.unit}}]}},data:{labels:this.props.data.map((function(e){return e.label})),datasets:[{label:this.props.title,data:this.props.data.map((function(e){return e.value})),backgroundColor:this.props.color}]}})}},{key:"render",value:function(){return r.a.createElement("canvas",{ref:this.canvasRef})}}]),a}(r.a.Component),Y=function(e){function a(){return Object(U.a)(this,a),Object(_.a)(this,Object(H.a)(a).apply(this,arguments))}return Object(F.a)(a,e),Object(M.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"card"+(this.props.plain?" card-plain":"")},r.a.createElement("div",{className:"header"+(this.props.hCenter?" text-center":"")},r.a.createElement("h4",{className:"title"},this.props.title),r.a.createElement("p",{className:"category"},this.props.category)),r.a.createElement("div",{className:"content"+(this.props.ctAllIcons?" all-icons":"")+(this.props.ctTableFullWidth?" table-full-width":"")+(this.props.ctTableResponsive?" table-responsive":"")+(this.props.ctTableUpgrade?" table-upgrade":"")},this.props.content,r.a.createElement("div",{className:"footer"},this.props.legend,null!=this.props.stats?r.a.createElement("hr",null):"",r.a.createElement("div",{className:"stats"},r.a.createElement("i",{className:this.props.statsIcon})," ",this.props.stats))))}}]),a}(n.Component),z=t(33),q=t.n(z),V=t(133),X=function(e){return r.a.createElement("div",{className:"content"},r.a.createElement(k.a,{fluid:!0},r.a.createElement(P.a,null,r.a.createElement(D.a,{md:12},r.a.createElement(Y,{title:"Data",category:"",ctTableFullWidth:!0,ctTableResponsive:!0,content:r.a.createElement(V.a,{striped:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Date"),r.a.createElement("th",null,"Value"))),r.a.createElement("tbody",null,e.charts.map((function(e){return r.a.createElement("tr",{key:q()()},r.a.createElement("td",null," ",e.label," "),r.a.createElement("td",null," ",e.value," "))}))))})))))},J=t(20),K=t.n(J);function $(e){var a=new Date(e),t=("0"+(a.getMonth()+1)).slice(-2),n=("0"+a.getDate()).slice(-2);return[a.getFullYear(),t,n].join("-")}function Q(e,a){for(var t=[],n=0;n<e.length;n++){var r=!1;if(t)for(var l=0;l<t.length;l++)t[l].label===$(e[n].date)&&("CHW TIN"===a&&(t[l].value=e[n].chwtin,r=!0),"CHW TOUT"===a&&(t[l].value=e[n].chwtout,r=!0),"SA T"===a&&(t[l].value=e[n].sat,r=!0),"SPACE T"===a&&(t[l].value=e[n].spacet,r=!0),"OA T"===a&&(t[l].value=e[n].chwtin,r=!0),"SA DUCT ST PRESSURE"===a&&(t[l].value=e[n].saductstpressure,r=!0),"OAT RH"===a&&(t[l].value=e[n].oatrh,r=!0),"Space RH"===a&&(t[l].value=e[n].spacerh,r=!0));r||("CHW TIN"===a&&t.push({label:$(e[n].date),value:e[n].chwtin}),"CHW TOUT"===a&&t.push({label:$(e[n].date),value:e[n].chwtout}),"SA T"===a&&t.push({label:$(e[n].date),value:e[n].sat}),"SPACE T"===a&&t.push({label:$(e[n].date),value:e[n].spacet}),"OA T"===a&&t.push({label:$(e[n].date),value:e[n].oat}),"SA DUCT ST PRESSURE"===a&&t.push({label:$(e[n].date),value:e[n].saductstpressure}),"OAT RH"===a&&t.push({label:$(e[n].date),value:e[n].oatrh}),"Space RH"===a&&t.push({label:$(e[n].date),value:e[n].spacerh}))}return t}function Z(e,a){var t=[];return"TEMPERATURE"===a&&(t.push({title:"CHW TOUT",unit:"\xbaC",data:Q(e,"CHW TOUT"),color:"#9368E9"}),t.push({title:"CHW TIN",unit:"\xbaC",data:Q(e,"CHW TIN"),color:"#FFA534"}),t.push({title:"OA T",data:Q(e,"OA T"),color:"#87CB16",unit:"\xbaC"}),t.push({title:"SPACE T",unit:"\xbaC",data:Q(e,"SPACE T"),color:"cd0000"}),t.push({title:"SA T",unit:"\xbaC",data:Q(e,"SA T"),color:"#1DC7EA"})),"PRESSURE"===a&&t.push({title:"SA DUCT ST PRESSURE",unit:"Pa",data:Q(e,"SA DUCT ST PRESSURE"),color:"#cd0000"}),"HUMIDITY"===a&&(t.push({title:"Space RH",unit:"RH",data:Q(e,"Space RH"),color:"#cd0000"}),t.push({title:"OAT RH",unit:"RH",data:Q(e,"OAT RH"),color:"#cd0000"})),t}var ee=function(){var e=Object(n.useContext)(j),a=e.getDataset,t=e.dataset,l=Object(n.useState)(null),c=Object(v.a)(l,2),s=c[0],o=c[1],i=Object(n.useState)(null),u=Object(v.a)(i,2),m=u[0],d=u[1],p=Object(n.useState)(null),E=Object(v.a)(p,2),h=E[0],g=E[1],b=Z(t,h);t||a();return setTimeout((function(){b=Z(t,h)}),36e4),null!==m?r.a.createElement(D.a,null,r.a.createElement("button",{className:"btn btn-secundario",onClick:function(e){e.preventDefault(),d(null)}}," Back "),r.a.createElement(Y,{statsIcon:"fa fa-clock-o",title:"feed",stats:"30 minutes ago",content:r.a.createElement("div",{id:"chartPreferences",className:"ct"},r.a.createElement(B,{data:b[m].data,title:b[m].title,color:b[m].color,unit:b[m].unit}))}),r.a.createElement(X,{charts:b[m].data})):r.a.createElement("main",{style:{paddingTop:20}},r.a.createElement(k.a,null,r.a.createElement("div",{className:"row nopadding"},r.a.createElement(I.a,null,"TEMPERATURE"===h?r.a.createElement(I.a.Toggle,{variant:"info",id:"dropdown-basic"},"Temperature  "):"PRESSURE"===h?r.a.createElement(I.a.Toggle,{variant:"info",id:"dropdown-basic"},"Pressure  "):"HUMIDITY"===h?r.a.createElement(I.a.Toggle,{variant:"info",id:"dropdown-basic"}," Humidity "):r.a.createElement(I.a.Toggle,{variant:"info",id:"dropdown-basic"},"Select Group"),r.a.createElement(I.a.Menu,null,r.a.createElement(I.a.Item,{onClick:function(e){e.preventDefault(),g("TEMPERATURE"),o(!0)}},"Temperature"),r.a.createElement(I.a.Item,{onClick:function(e){e.preventDefault(),g("PRESSURE"),o(!0)}},"Pressure"),r.a.createElement(I.a.Item,{onClick:function(e){e.preventDefault(),g("HUMIDITY"),o(!0)}},"Humidity"))),s?r.a.createElement(P.a,null,b.map((function(e,a){return r.a.createElement(D.a,{key:q()(),onClick:function(){d(a)}},r.a.createElement(Y,{statsIcon:"fa fa-clock-o",title:e.title,stats:"30 minutes ago",key:q()(),content:r.a.createElement("div",{id:"chartPreferences",className:"ct-chart ct-perfect-fourth"},r.a.createElement(G,{data:e.data,title:e.title,color:e.color,unit:e.unit}))}))}))):null)))},ae=function(e){var a=e.ai,t=Object(n.useContext)(A),l=t.items,c=t.getItems;t.currentItem;return Object(n.useEffect)((function(){c()}),[]),r.a.createElement("ul",{className:"links"},r.a.createElement(w.a,null,l.map((function(e){return r.a.createElement(R.a,{key:e._id,timeout:200,classNames:"proyecto"},r.a.createElement(S,{item:e,ai:a}))}))),r.a.createElement("li",null))},te=function(){return Object(n.useContext)(d).dashboard?r.a.createElement("aside",null,r.a.createElement("div",{id:"sidebar",className:"nav-collapse "},r.a.createElement("ul",{className:"sidebar-menu"},r.a.createElement("li",{className:"active"},r.a.createElement("a",{className:"btn btn-primario btn-block",href:"/"},r.a.createElement("i",{className:"icon_house_alt"}),r.a.createElement("span",null,"Dashboard"))),r.a.createElement(ae,null)))):null},ne=function(){var e=Object(n.useContext)(p),a=e.usuario,t=e.usuarioAutenticado,l=Object(n.useContext)(d).dashboard;Object(n.useEffect)((function(){t()}),[]);var c=" ",s=!1,o=" ";return a&&(s=a.admin,c=a.name,o=a._id),r.a.createElement("div",{className:"row nopadding"},r.a.createElement("div",{className:"col-md-12 nopadding"},r.a.createElement(E,null)),l?r.a.createElement("div",{className:"col-md-3 nopadding"},r.a.createElement(te,null)):null,s?r.a.createElement("div",{className:"col-md-2 nopadding"},r.a.createElement(x,{id:o})):null,r.a.createElement("div",{className:"col-md-7"},r.a.createElement("main",null,r.a.createElement("li",{className:"tarea sombra"},r.a.createElement("p",null,c," : ",s?r.a.createElement("span",null,"Administrator"):null," "),s?r.a.createElement("div",{className:"acciones"},r.a.createElement(C,null)):r.a.createElement("p",null," User ")))))},re=t(6),le=t.n(re),ce=t(10),se=t(134),oe=t(137),ie=t(80),ue=K.a.create({baseURL:"https://aqueous-anchorage-35192.herokuapp.com/"}),me=function(e){function a(e){var t;return Object(U.a)(this,a),(t=Object(_.a)(this,Object(H.a)(a).call(this,e))).handleSubmit=function(){var e=Object(ce.a)(le.a.mark((function e(a){var n,r,l,c;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),n=a.currentTarget,r=new FormData(n),t.setState({isSending:!0}),l=t.props.alarm.message+". ",c=t.props.alarm._id,e.next=8,ue.post("/api/alarms",{message:"Hi! This alarm was assigned to you: ".concat(l),email:r.get("email"),id:c}).then((function(e){if("Message sent"===e.data)n.reset(),t.setState({isSent:!0}),setTimeout((function(){t.setState({isSent:!1})}),13e3);else{t.setState({errors:e.data});var a=3e3*t.state.errors.length;setTimeout((function(){t.setState({errors:[]})}),a)}})).catch((function(e){return console.log(e)})).finally((function(){return t.setState({isSending:!1})}));case 8:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),t.state={isSending:!1,isSent:!1,errors:[]},t}return Object(F.a)(a,e),Object(M.a)(a,[{key:"showContactForm",value:function(){var e=this.state,a=e.isSending,t=e.isSent,n=e.errors;return n.length>0?n.map((function(e,a){return r.a.createElement(se.a,{key:a,variant:"danger"},e.msg)})):t?r.a.createElement(P.a,{className:"h-100 justify-content-center align-items-center"},r.a.createElement(D.a,{className:"text-center",md:12},r.a.createElement(se.a,{variant:"success"},"MESSAGE SENT (Refresh page) "))):r.a.createElement(oe.a,{className:"formContact",onSubmit:this.handleSubmit},r.a.createElement(oe.a.Group,{as:D.a},r.a.createElement(oe.a.Control,{name:"email",id:"email",disabled:a,type:"email",placeholder:"Enter an email"})),r.a.createElement(oe.a.Group,{className:"pl-3"},r.a.createElement(ie.a,{type:"submit",disabled:a},a?"Sending...":"Send Message",!a&&n.length>0?"Resend":null)))}},{key:"render",value:function(){return r.a.createElement(k.a,{className:"h-100"},this.showContactForm())}}]),a}(n.Component),de=function(e){function a(e){var a=new Date(e),t=("0"+(a.getMonth()+1)).slice(-2),n=("0"+a.getDate()).slice(-2),r=a.getHours(),l=a.getMinutes(),c=a.getSeconds(),s=r>=12?"pm":"am";return r=(r%=12)||12,l=l<10?"0"+l:l,[a.getFullYear(),t,n].join("-")+" "+r+":"+l+" "+c+" "+s}return r.a.createElement("div",{className:"content"},r.a.createElement(k.a,{fluid:!0},r.a.createElement(P.a,null,r.a.createElement(D.a,{md:12},r.a.createElement(Y,{title:"Alarms",category:"",ctTableFullWidth:!0,ctTableResponsive:!0,content:r.a.createElement(V.a,{striped:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Alarm Description"),r.a.createElement("th",null,"Start"),r.a.createElement("th",null,"Status"),r.a.createElement("th",null,"Close Date"),r.a.createElement("th",null,"Assign To"),r.a.createElement("th",null,"Assign Date"))),r.a.createElement("tbody",null,e.alarms.map((function(e){return r.a.createElement("tr",{key:q()()},r.a.createElement("td",null," ",e.message," "),r.a.createElement("td",null," ",a(e.start)," "),r.a.createElement("td",null," ",e.status," "),r.a.createElement("td",null," ",e.closeDate," "),e.assignTo?r.a.createElement("td",null," ",e.assignTo," "):r.a.createElement("td",null,r.a.createElement(me,{alarm:e})),e.assignDate?r.a.createElement("td",null," ",a(e.assignDate)," "):r.a.createElement("td",null,"  "))}))))})))))};function pe(e){var a=new Date(e),t=("0"+(a.getMonth()+1)).slice(-2),n=("0"+a.getDate()).slice(-2),r=a.getHours(),l=a.getMinutes(),c=a.getSeconds(),s=r>=12?"pm":"am";return r=(r%=12)||12,l=l<10?"0"+l:l,[a.getFullYear(),t,n].join("-")+" "+r+":"+l+" "+c+" "+s}function Ee(e,a){var t,n=[],r=new Date;if(a.length>0)for(var l=0;l<a.length;l++)(!t||a[l].start>t)&&(t=a[l].start);else t=r;for(var c=0;c<e.length;c++)pe(e[c].date)>pe(t)&&(e[c].saductstpressure<=90&&e[c].safanfrequency<60&&n.push({message:"SA Fan Unable to Reach Maximum Frequency",status:"Open",start:e[c].date,assignTo:null}),e[c].spacet>=24&&60===e[c].safanfrequency&&e[c].chwvalveposition<100&&n.push({message:"CHW Valve Not Fully Open",status:"Open",start:e[c].date,assignTo:null}),e[c].spacet<=22&&40===e[c].safanfrequency&&e[c].chwvalveposition>0&&n.push({message:"CHW Valve Not Fully Closed",status:"Open",start:e[c].date,assignTo:null}),e[c].saductstpressure>=110&&e[c].safanfrequency>40&&n.push({message:"SA Fan Unable to Reach Minimum Frequency",status:"Open",start:e[c].date,assignTo:null}),e[c].saductstpressure<=90&&e[c].safr<1e3&&n.push({message:"SA Fan Flow Rate Unable to Reach Maximum",status:"Open",start:e[c].date,assignTo:null}),e[c].saductstpressure>=110&&e[c].safr>600&&n.push({message:"SA Fan Flow Rate Unable to Reach Minimum",status:"Open",start:e[c].date,assignTo:null}),e[c].space<=400&&e[c].oadamperopen>0&&n.push({message:"OA Damper Unable to Reach Minimum Position",status:"Open",start:e[c].date,assignTo:null}),e[c].space>=2400&&e[c].oadamperopen<30&&n.push({message:"OA Damper Unable to Reach Maximum Position",status:"Open",start:e[c].date,assignTo:null}));return n}var he=function(e){var a=e.alarms,t=e.dataset,n=Ee(t,a),l=function(){var e=Object(ce.a)(le.a.mark((function e(a){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ue.post("/api/alarms/addAlarms",a);case 3:e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(a){return e.apply(this,arguments)}}();if(n.length>0){for(var c=0;c<n.length;c++){l({message:n[c].message,status:n[c].status,start:new Date(n[c].start),assignTo:n[c].assignTo})}n=[]}return setTimeout((function(){a.length>0&&Ee(t)}),36e5),r.a.createElement(D.a,null,r.a.createElement(de,{alarms:a}))},ge=function(e){function a(){return Object(U.a)(this,a),Object(_.a)(this,Object(H.a)(a).apply(this,arguments))}return Object(F.a)(a,e),Object(M.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"card card-stats bg-".concat(this.props.bg)},r.a.createElement("div",{className:"content"},r.a.createElement(P.a,null,r.a.createElement(D.a,{xs:6},r.a.createElement("div",{className:"numbers"},r.a.createElement("p",null,this.props.statsText1),r.a.createElement("p",null," ",this.props.statsValue1," ",this.props.unit," "))),r.a.createElement(D.a,{xs:6},r.a.createElement("div",{className:"numbers"},r.a.createElement("p",null,this.props.statsText2),r.a.createElement("p",null," ",this.props.statsValue2," ",this.props.unit," ")))),r.a.createElement("div",{className:"footer"},r.a.createElement("hr",null),!isNaN(this.props.amount)&&isFinite(this.props.amount)&&this.props.amount>0?r.a.createElement("span",null,"Savings: ",this.props.amount," %"):r.a.createElement("span",null,"No savings"),r.a.createElement("hr",null),r.a.createElement("div",{className:"stats"},this.props.statsIcon," ",this.props.statsIconText))))}}]),a}(n.Component),be=t(39),fe=t.n(be);function ve(e){var a=new Date(e),t=("0"+(a.getMonth()+1)).slice(-2),n=("0"+a.getDate()).slice(-2);return[a.getFullYear(),t,n].join("-")}var ye=function(){var e,a=Object(n.useContext)(j),t=a.getDataset,l=a.dataset,c={},s={},o=[];return l?(s=function(e){for(var a=0,t=0,n=0,r=0,l=0,c=0,s=new Date,o=(s.getFullYear(),s.getMonth(),s.getDate(),0);o<e.length;o++){var i=new Date(e[o].date);i.getMonth()===s.getMonth()&&(n+=e[o].totalpower),i.getMonth()===s.getMonth()-1&&(r+=e[o].totalpower);var u=fe()(),m=fe()(e[o].date),d=fe()().subtract(7,"days"),p=fe()().subtract(1,"years"),E=u.isoWeek()===m.isoWeek(),h=m.isoWeek()===d.isoWeek(),g=u.isoWeekYear()===m.isoWeekYear(),b=u.isoWeekYear()===p.isoWeekYear();E&&e[o].totalpower&&(l+=e[o].totalpower),h&&e[o].totalpower&&(c+=e[o].totalpower),g&&e[o].totalpower&&(a+=e[o].totalpower),b&&e[o].totalpower&&(t+=e[o].totalpower)}return{thisYearEnergy:a,lastYearEnergy:t,monthlyEnergy:n,lastMonthEnergy:r,weeklyEnergy:l,lastWeekEnergy:c,yearlyAmount:(100*(t-a)/t).toFixed(1),monthlyAmount:(100*(r-n)/r).toFixed(1),weeklyAmount:(100*(c-l)/c).toFixed(1)}}(l),l.length>0&&(e=l[l.length-1].date),c=function(e){for(var a=[],t=0;t<e.length;t++){var n=!1;if(a)for(var r=0;r<a.length;r++)a[r].label===ve(e[t].date)&&(a[r].value=e[t].ahucop,n=!0);n||a.push({label:ve(e[t].date),value:e[t].ahucop})}return a}(l),o=function(e){for(var a=[],t=0;t<e.length;t++){var n=!1;if(a)for(var r=0;r<a.length;r++)a[r].label===ve(e[t].date)&&(a[r].value=a[r].value+e[t].totalpower,n=!0);n||a.push({label:ve(e[t].date),value:e[t].totalpower})}return a}(l)):t(),r.a.createElement(k.a,null,r.a.createElement(P.a,null,r.a.createElement("div",{className:"col-4"},r.a.createElement(ge,{statsValue1:s.lastWeekEnergy,statsValue2:s.weeklyEnergy,unit:"KW-Hr",statsText1:"Last Week",statsText2:"This Week",amount:s.weeklyAmount,bg:"info",bigIcon:r.a.createElement("i",{className:"pe-7s-graph1 text-danger"}),statsIcon:r.a.createElement("i",{className:"fa fa-clock-o"}),statsIconText:"This Week "})),r.a.createElement("div",{className:"col-4"},r.a.createElement(ge,{statsValue1:s.lastMonthEnergy,statsValue2:s.monthlyEnergy,unit:"KW-Hr",statsText1:"Last Month",statsText2:"This Month",amount:s.monthlyAmount,bg:"danger",bigIcon:r.a.createElement("i",{className:"pe-7s-graph1 text-danger"}),statsIcon:r.a.createElement("i",{className:"fa fa-clock-o"}),statsIconText:"This Month"})),r.a.createElement("div",{className:"col-4"},r.a.createElement(ge,{statsValue2:s.thisYearEnergy,statsValue1:s.lastYearEnergy,unit:"KW-Hr",statsText2:"This Year",statsText1:"Last Year",amount:s.yearlyAmount,bg:"success",bigIcon:r.a.createElement("i",{className:"pe-7s-graph1 text-danger"}),statsIcon:r.a.createElement("i",{className:"fa fa-clock-o"}),statsIconText:"This Year"}))),r.a.createElement(P.a,null,r.a.createElement(Y,{statsIcon:"fa fa-history",id:"chartHours",title:"Energy",category:"Energy",stats:"Updated 30 minutes ago",content:r.a.createElement("div",{className:"ct-chart"},r.a.createElement(G,{data:o,title:"Energy",color:"#2F4B8A",max:e,min:void 0,unit:"kWh"}))})),r.a.createElement(P.a,null,r.a.createElement(Y,{statsIcon:"fa fa-history",id:"chartHours",title:"AHU COP",category:"AHU COP",stats:"Updated 30 minutes ago",content:r.a.createElement("div",{className:"ct"},r.a.createElement(B,{data:c,title:"AHU COP",color:"#FA0000",unit:""}))})))},Te=t(138),Oe=function(e){return console.log("props.energyTableData====>",e.energyTableData),r.a.createElement(Te.a,{style:{padding:"30px"}},r.a.createElement(V.a,{striped:!0,bordered:!0,hover:!0,style:{marginTop:"20px"}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null),r.a.createElement("th",null,"Date"),r.a.createElement("th",null,"Tin Condenser, C"),r.a.createElement("th",null,"chwtout"),r.a.createElement("th",null,"dT Air, C"),r.a.createElement("th",null,"dT CHW"),r.a.createElement("th",null,"safanfrequency"),r.a.createElement("th",null,"totalpower"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Current Reading"),r.a.createElement("td",null,e.energyTableData&&e.energyTableData["Current Reading"].date),r.a.createElement("td",null,e.energyTableData&&e.energyTableData["Current Reading"]["Tin Condenser, C"]),r.a.createElement("td",null,e.energyTableData&&e.energyTableData["Current Reading"].chwtout),r.a.createElement("td",null,e.energyTableData&&e.energyTableData["Current Reading"]["dT Air, C"]),r.a.createElement("td",null,e.energyTableData&&e.energyTableData["Current Reading"]["dT CHW, C"]),r.a.createElement("td",null,e.energyTableData&&e.energyTableData["Current Reading"].safanfrequency),r.a.createElement("td",null,e.energyTableData&&e.energyTableData["Current Reading"].totalpower)),r.a.createElement("tr",null,r.a.createElement("th",null,"Last Reading"),r.a.createElement("td",null,e.energyTableData&&e.energyTableData["Last Reading"].date),r.a.createElement("td",null,e.energyTableData&&e.energyTableData["Last Reading"]["Tin Condenser, C"]),r.a.createElement("td",null,e.energyTableData&&e.energyTableData["Last Reading"].chwtout),r.a.createElement("td",null,e.energyTableData&&e.energyTableData["Last Reading"]["dT Air, C"]),r.a.createElement("td",null,e.energyTableData&&e.energyTableData["Last Reading"]["dT CHW, C"]),r.a.createElement("td",null,e.energyTableData&&e.energyTableData["Last Reading"].safanfrequency),r.a.createElement("td",null,e.energyTableData&&e.energyTableData["Last Reading"].totalpower)),r.a.createElement("tr",null,r.a.createElement("th",null,"Optimized Current Reading"),r.a.createElement("td",null,e.energyTableData&&e.energyTableData["Optimized Current Reading"].date),r.a.createElement("td",null,e.energyTableData&&e.energyTableData["Optimized Current Reading"]["Tin Condenser, C"]),r.a.createElement("td",null,e.energyTableData&&e.energyTableData["Optimized Current Reading"].chwtout),r.a.createElement("td",null,e.energyTableData&&e.energyTableData["Optimized Current Reading"]["dT Air, C"]),r.a.createElement("td",null,e.energyTableData&&e.energyTableData["Optimized Current Reading"]["dT CHW, C"]),r.a.createElement("td",null,e.energyTableData&&e.energyTableData["Optimized Current Reading"].safanfrequency),r.a.createElement("td",null,e.energyTableData&&e.energyTableData["Optimized Current Reading"].totalpower)))))},Ce=[{date:"02/12/2020 12:03:34",name:"Actuator",condition:"Short description",params:"Range",value:"+30"},{date:"02/12/2020 12:03:34",name:"Sensor",condition:"Short description",params:"Range",value:"+45"},{date:"02/12/2020 12:03:34",name:"Motor",condition:"Short description",params:"Range",value:"-12"}],Ne=[],we=[],Re=[],xe=[];function Ae(e,a){for(var t=[],n=0;n<e.length;n++)t.push({label:e[n],value:a[n]});return t}var je=function(e){var a=Object(n.useContext)(p),t=a.usuarioAutenticado,l=a.getUsers,c=(a.usuarios,Object(n.useContext)(A)),s=c.item,o=c.getEnergyOptimization,i=c.energyTableData,u=(Object(n.useContext)(d).dashboard,Object(n.useContext)(j)),m=u.getDataset,E=(u.dataset,u.getGraphApi),h=u.graphApiData;return Object(n.useEffect)((function(){t()}),[]),Object(n.useEffect)((function(){l(),m(),setInterval((function(){E(),o()}),2e4)}),[s]),s&&s[0].name,h&&(Ne=Ae(h.X1,h.y1),we=Ae(h.X2,h.y2),Re=Ae(h.X3,h.y3),xe=Ae(h.X4,h.y4)),console.log("energyTableData=-=>",i),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-9 nopadding"},r.a.createElement("main",{style:{paddingTop:20}},r.a.createElement(k.a,null,r.a.createElement(P.a,null,r.a.createElement(D.a,null,r.a.createElement("h4",null,"Energy Optimization"))),r.a.createElement("hr",null),r.a.createElement("br",null),r.a.createElement(P.a,null,r.a.createElement(D.a,null,r.a.createElement("h4",null,"dT Air SA Fan Frequency"))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{className:"ct-chart",style:{height:300,width:"33%",display:"inline-block",margin:"20px"}},r.a.createElement(G,{data:Ne,title:"dT Air, C",color:"#2F4B8A",max:void 0,min:void 0,unit:"SA Fan Frequency, Hz"})),r.a.createElement("div",{className:"ct-chart",style:{height:300,width:"33%",display:"inline-block",margin:"20px"}},r.a.createElement(G,{data:we,title:"dT CHW, C",color:"#2F4B8A",max:void 0,min:void 0,unit:"CHW Tout, C"}))," ",r.a.createElement("div",{className:"ct-chart",style:{height:300,width:"33%",display:"inline-block",margin:"20px"}},r.a.createElement(G,{data:Re,title:"dT CHW, C",color:"#2F4B8A",max:void 0,min:void 0,unit:"Tin Condenser, C"})),r.a.createElement("div",{className:"ct-chart",style:{height:300,width:"33%",display:"inline-block",margin:"20px"}},r.a.createElement(G,{data:xe,title:"PT, Total PowerPlant Power, KW",color:"#2F4B8A",max:void 0,min:void 0,unit:"Tin Condenser, C"})),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(P.a,null,r.a.createElement(D.a,null,r.a.createElement("h4",{style:{marginBottom:20}},"Optimization"))),r.a.createElement(P.a,null,r.a.createElement(D.a,null,r.a.createElement("p",null,"The last reading shows the values read by machine second last time the current reading shows the latest readings and optimize reading shows the readings suggested by AI for better performance."),"              ")),r.a.createElement(Oe,{data:Ce,energyTableData:i&&i}),r.a.createElement("br",null)))))},Se=t(135),De=t(83),ke=function(e){var a=Object(n.useState)(!1),t=Object(v.a)(a,2),l=t[0],c=t[1],s=Object(n.useState)(""),o=Object(v.a)(s,2),i=o[0],u=o[1],m=Object(n.useState)(""),d=Object(v.a)(m,2),p=d[0],E=d[1],h=Object(n.useState)(""),g=Object(v.a)(h,2),b=g[0],f=g[1],y=Object(n.useState)("Actuator"),T=Object(v.a)(y,2),O=T[0],C=T[1];console.log("FAULTtABLEdata=====>",e.faultTableData);return r.a.createElement(Te.a,{style:{padding:"30px"}},r.a.createElement(Se.a,{show:l,size:"sm","aria-labelledby":"contained-modal-title-vcenter",centered:!0},r.a.createElement(Se.a.Header,null,r.a.createElement(Se.a.Title,{id:"contained-modal-title-vcenter"},"Enter Parameters")),r.a.createElement(Se.a.Body,null,r.a.createElement(oe.a,null,r.a.createElement(oe.a.Group,{controlId:"formBasicEmail"},r.a.createElement(oe.a.Label,null,"Name"),r.a.createElement(oe.a.Control,{type:"text",placeholder:"Name",disabled:!0,value:i,onChange:function(e){return u(e.target.value)}})),r.a.createElement(oe.a.Group,{controlId:"formBasicPassword"},r.a.createElement(oe.a.Label,null,"Lower"),r.a.createElement(oe.a.Control,{type:"text",placeholder:"Lower",value:p,onChange:function(e){return E(e.target.value)}})),r.a.createElement(oe.a.Group,{controlId:"formBasicPassword"},r.a.createElement(oe.a.Label,null,"Upper"),r.a.createElement(oe.a.Control,{type:"text",placeholder:"Upper",value:b,onChange:function(e){return f(e.target.value)}})))),r.a.createElement(Se.a.Footer,null,r.a.createElement(ie.a,{variant:"success",onClick:function(){i&&p&&b?(e.setParameters(i,p,b),c(!1)):alert("Please enter fields properly")}},"Submit"),r.a.createElement(ie.a,{onClick:function(){return c(!1)}},"Close"))),r.a.createElement(I.a,null,r.a.createElement(I.a.Toggle,{id:"dropdown-basic"},O),r.a.createElement(I.a.Menu,null,r.a.createElement(I.a.Item,{href:"#/actuator",onSelect:function(){e.getSelectedItems("actuator"),C("Actuator")}},"Actuator"),r.a.createElement(I.a.Item,{href:"#/sensor",onSelect:function(){e.getSelectedItems("sensor"),C("Sensor")}},"Sensor"),r.a.createElement(I.a.Item,{href:"#/motor",onSelect:function(){e.getSelectedItems("motor"),C("Motor")}},"Motor"))),r.a.createElement(V.a,{striped:!0,bordered:!0,hover:!0,style:{marginTop:"20px"}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Date"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"HEALTH CONDITION"),r.a.createElement("th",null,"SET PARAMETERS"),r.a.createElement("th",null,"VALUE"))),r.a.createElement("tbody",null,e.faultTableData&&e.faultTableData.map((function(e,a){return r.a.createElement("tr",null,r.a.createElement("td",null,e.date),r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.condition),r.a.createElement("td",null,e.lower," ----- ",e.upper," ",r.a.createElement("span",{onClick:function(){c(!0),u(e.name)},style:{float:"right",padding:"5px",cursor:"pointer"}},r.a.createElement(De.a,{color:"gray",size:20}))),r.a.createElement("td",null,e.value))})))))},Ie=[{date:"02/12/2020 12:03:34",name:"Actuator",condition:"Short description",params:"Range",value:"+30"},{date:"02/12/2020 12:03:34",name:"Sensor",condition:"Short description",params:"Range",value:"+45"},{date:"02/12/2020 12:03:34",name:"Motor",condition:"Short description",params:"Range",value:"-12"}],Pe=function(e){var a=Object(n.useContext)(p),t=a.usuarioAutenticado,l=a.getUsers,c=(a.usuarios,Object(n.useContext)(A)),s=c.item,o=c.getSelectedTable,i=c.faultTableData,u=c.setParameters,m=(c.setParams,Object(n.useContext)(d).dashboard,Object(n.useContext)(j)),E=m.getDataset,h=(m.dataset,m.getMachineCondition),g=m.machineConditionData,b=Object(n.useState)("actuator"),f=Object(v.a)(b,2);f[0],f[1];Object(n.useEffect)((function(){t(),o()}),[]),Object(n.useEffect)((function(){l(),E(),o(),setInterval((function(){h()}),2e4)}),[s]),s&&s[0].name;return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-9 nopadding"},r.a.createElement("main",{style:{paddingTop:20}},r.a.createElement(k.a,null,r.a.createElement(P.a,null,r.a.createElement(D.a,null,r.a.createElement("h4",null,"Fault Predictions"))),r.a.createElement("hr",null),r.a.createElement("br",null),r.a.createElement(P.a,null,r.a.createElement(D.a,null,r.a.createElement("h4",null,"Condition Monitoring"))),r.a.createElement("br",null),r.a.createElement(P.a,null,r.a.createElement(D.a,null,r.a.createElement("p",null,"Shows the overall health state of machine.The red line is threshold of good health the blue line shows the current health state of the machine."))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{className:"ct-chart",style:{width:"700px",alignSelf:"flex-end",padding:"30px",margin:"30px"}},r.a.createElement(B,{data:g||[{label:"wait",value:1,threshold:3.9}],title:"Energy",color:"#2F4B8A",max:10,min:1,unit:""}),r.a.createElement("br",null),r.a.createElement("h5",{style:{marginLeft:"250px"}},"Date / Time")),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(P.a,null,r.a.createElement(D.a,null,r.a.createElement("h4",null,"Anomaly Detector"))),r.a.createElement("br",null),r.a.createElement(P.a,null,r.a.createElement(D.a,null,r.a.createElement("p",null,"Anomaly detector represent actuators, sensors and motor performance it takes a last reading monitors if there is any abnormal activity and triggers it as alarm."))),r.a.createElement("br",null),r.a.createElement(ke,{data:Ie,getSelectedItems:function(e){o(e)},setParameters:u,faultTableData:i})))))},Ue=function(e){var a,t=Object(n.useContext)(p),l=t.usuarioAutenticado,c=t.getUsers,s=t.usuarios,o=t.usuario,i=Object(n.useContext)(A).item,u="",m=Object(n.useContext)(j),g=m.getDataset,b=m.dataset,f=Object(n.useContext)(d).dashboard,v=Object(n.useContext)(h),y=v.alarms,T=v.getAlarms;return Object(n.useEffect)((function(){l()}),[]),Object(n.useEffect)((function(){c(),g(),T()}),[i]),i&&(u=i[0].name),o&&(a=o.admin),localStorage.getItem("token")||e.history.push("/"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12 nopadding"},r.a.createElement(E,{usuario:o,tipo:a})),f?r.a.createElement("div",{className:"col-md-2 nopadding"},r.a.createElement(te,null)):null,r.a.createElement("div",{className:"col-md-10 nopadding"},r.a.createElement("main",null,i?"FDD Alarms"===u?r.a.createElement(he,{usuarios:s,dataset:b,alarms:y}):"Energy"===u?r.a.createElement(ye,null):"Energy Optimization"===u?r.a.createElement(je,null):"Fault Prediction"===u?r.a.createElement(Pe,null):"Artificial Intelligence"===u?r.a.createElement(Pe,null):r.a.createElement(ee,null):r.a.createElement(ye,null))))},Me=function(e){var a=Object(n.useContext)(p),t=a.usuarioAutenticado,l=a.getUsers,c=(a.usuarios,Object(n.useContext)(A).item),s=(Object(n.useContext)(d).dashboard,Object(n.useContext)(j)),o=s.getDataset,i=s.dataset;return Object(n.useEffect)((function(){t()}),[]),Object(n.useEffect)((function(){l(),o()}),[c]),c&&c[0].name,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12 nopadding"},r.a.createElement(E,null)),r.a.createElement("div",{className:"col-md-3 nopadding"},r.a.createElement(te,null)),r.a.createElement("div",{className:"col-md-9 nopadding"},r.a.createElement("main",null,r.a.createElement(ee,null)),r.a.createElement("div",{className:"ct-chart"},r.a.createElement(G,{data:i,title:"Energy",color:"#2F4B8A",max:6,min:0,unit:"kWh"}))))},_e=function(e,a){switch(a.type){case"MOSTRAR_ALERTA":return{alerta:a.payload};case"OCULTAR_ALERTA":return{alerta:null};default:return e}},He=function(e){var a=Object(n.useReducer)(_e,{alerta:null}),t=Object(v.a)(a,2),l=t[0],c=t[1];return r.a.createElement(y.Provider,{value:{alerta:l.alerta,mostrarAlerta:function(e,a){c({type:"MOSTRAR_ALERTA",payload:{msg:e,categoria:a}}),setTimeout((function(){c({type:"OCULTAR_ALERTA"})}),2e4)}}},e.children)},Fe=t(84),Le=function(e,a){switch(a.type){case"LOGIN_EXITOSO":case"REGISTRO_EXITOSO":return localStorage.setItem("token",a.payload.token),Object(f.a)({},e,{autenticado:!0,mensaje:null,cargando:!1});case"LOGIN_ERROR":case"REGISTRO_ERROR":case"CERRAR_SESION":return localStorage.removeItem("token"),Object(f.a)({},e,{token:null,usuario:null,autenticado:null,mensaje:a.payload,cargando:!1});case"OBTENER_USUARIO":return Object(f.a)({},e,{autenticado:!0,usuario:a.payload,cargando:!1});case"DELETE_MEMBER":return Object(f.a)({},e,{usuarios:e.usuarios.filter((function(e){return e.id!==a.payload}))});case"OBTENER_USUARIOS":return Object(f.a)({},e,{usuarios:a.payload});case"AGREGAR_USUARIO":return Object(f.a)({},e,{usuarios:[a.payload].concat(Object(Fe.a)(e.usuarios))});default:return e}},We=function(e){e?ue.defaults.headers.common["x-auth-token"]=e:delete ue.defaults.headers.common["x-auth-token"]},Be=function(e){var a={token:localStorage.getItem("token"),autenticado:null,usuario:null,usuarios:[],mensaje:null,cargando:!0},t=Object(n.useReducer)(Le,a),l=Object(v.a)(t,2),c=l[0],s=l[1],o=function(){var e=Object(ce.a)(le.a.mark((function e(){var a,t;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=localStorage.getItem("token"))&&We(a),e.prev=2,e.next=5,ue.get("/api/auth");case 5:t=e.sent,s({type:"OBTENER_USUARIO",payload:t.data.usuario}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0.response),s({type:"LOGIN_ERROR"});case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=Object(ce.a)(le.a.mark((function e(a){var t,n;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ue.post("/api/usuarios",a);case 3:t=e.sent,s({type:"REGISTRO_EXITOSO",payload:t.data}),o(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),n={msg:e.t0.response.data.msg,categoria:"alerta-error"},s({type:"REGISTRO_ERROR",payload:n});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(a){return e.apply(this,arguments)}}(),u=function(){var e=Object(ce.a)(le.a.mark((function e(a){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ue.post("/api/usuarios",a);case 3:e.sent,console.log(a),s({type:"AGREGAR_USUARIO",payload:a}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(a){return e.apply(this,arguments)}}(),m=function(){var e=Object(ce.a)(le.a.mark((function e(){var a,t;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=localStorage.getItem("token"))&&We(a),e.prev=2,e.next=5,ue.get("/api/usuarios");case 5:t=e.sent,s({type:"OBTENER_USUARIOS",payload:t.data.users}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0.response);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=Object(ce.a)(le.a.mark((function e(a){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ue.delete("/api/usuarios/".concat(a));case 3:s({type:"DELETE_MEMBER",payload:a}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(a){return e.apply(this,arguments)}}(),E=function(){var e=Object(ce.a)(le.a.mark((function e(a){var t,n;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ue.post("/api/auth",a);case 3:t=e.sent,s({type:"LOGIN_EXITOSO",payload:t.data}),o(),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.response.data.msg),n={msg:e.t0.response.data.msg,categoria:"alerta-error"},s({type:"LOGIN_ERROR",payload:n});case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(a){return e.apply(this,arguments)}}();return r.a.createElement(p.Provider,{value:{token:c.token,autenticado:c.usuario,usuario:c.usuario,usuarios:c.usuarios,mensaje:c.mensaje,cargando:c.cargando,registrarUsuario:i,agregarUsuario:u,usuarioAutenticado:o,getUsers:m,deleteMember:d,iniciarSesion:E,cerrarSesion:function(){s({type:"CERRAR_SESION"})}}},e.children)},Ge=function(e,a){switch(a.type){case"GET_ALARMS":return Object(f.a)({},e,{alarms:a.payload});default:return e}},Ye=function(e){var a=Object(n.useReducer)(Ge,{alarms:[]}),t=Object(v.a)(a,2),l=t[0],c=t[1],s=function(){var e=Object(ce.a)(le.a.mark((function e(a){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ue.post("/api/alarms/addAlarms",a);case 3:e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(a){return e.apply(this,arguments)}}(),o=function(){var e=Object(ce.a)(le.a.mark((function e(){var a;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ue.get("/api/alarms");case 3:a=e.sent,c({type:"GET_ALARMS",payload:a.data.alarms}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.response);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(h.Provider,{value:{alarms:l.alarms,createAlarm:s,getAlarms:o}},e.children)},ze=function(e,a){switch(a.type){case"GET_ITEMS":return Object(f.a)({},e,{items:a.payload});case"CURRENT_ITEM":return Object(f.a)({},e,{item:e.items.filter((function(e){return e._id===a.payload}))});case"ENERGY_OPT_TABLE":return Object(f.a)({},e,{energyTableData:a.payload});case"GET_FAULT_TABLE":return Object(f.a)({},e,{faultTableData:a.payload});case"SET_PARAMETERS":return Object(f.a)({},e,{setParams:a.payload});default:return e}},qe=function(e){var a=Object(n.useReducer)(ze,{items:[],item:null,faultTableData:null,energyTableData:null,setParams:null}),t=Object(v.a)(a,2),l=t[0],c=t[1],s=function(){var e=Object(ce.a)(le.a.mark((function e(){var a,t;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ue.get("/api/items");case 3:(a=e.sent).data.items[0].href="#",a.data.items[1].href="#",a.data.items[2].href="#",a.data.items[3].href="#",a.data.items[4].href="#",(t=[])[0]=a.data.items[2],t[1]=a.data.items[4],t[2]=a.data.items[3],t[3]={_id:"5e597ae0f1acc234600c2ed911",name:"Artificial Intelligence",href:"#"},t[5]=a.data.items[0],t[4]=a.data.items[1],console.log("arr====>",t),c({type:"GET_ITEMS",payload:t}),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),console.log(e.t0);case 23:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(){return e.apply(this,arguments)}}(),o=function(){var e=Object(ce.a)(le.a.mark((function e(){var a,t,n,r,l=arguments;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>0&&void 0!==l[0]?l[0]:"actuator",console.log("data",a),e.prev=2,e.next=5,K.a.get("https://hvac-api.herokuapp.com/api/".concat(a));case 5:for(r in t=e.sent,console.log("result.data=====>",t.data),n=[],t.data)n.push({name:r,condition:t.data[r].status,value:t.data[r].anamoly_value,lower:t.data[r].lower_value,upper:t.data[r].upper_value,date:t.data[r].date});c({type:"GET_FAULT_TABLE",payload:n}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=Object(ce.a)(le.a.mark((function e(a,t,n){var r,l;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("name,lower,upper",a,t,n),r={name:a,lower:Number(t),upper:Number(n)},e.prev=2,e.next=5,K.a.post("https://hvac-api.herokuapp.com/api/setParameters",r);case 5:l=e.sent,console.log("result",l),l.data&&alert(l.data.msg),c({type:"SET_PARAMETERS",payload:l.data}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(a,t,n){return e.apply(this,arguments)}}(),u=function(){var e=Object(ce.a)(le.a.mark((function e(){var a,t,n=arguments;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.length>0&&void 0!==n[0]?n[0]:"actuator",console.log("data",a),e.prev=2,e.next=5,K.a.get("https://hvac-api.herokuapp.com/api/Optimization");case 5:t=e.sent,console.log("result energytable===?",t.data),c({type:"ENERGY_OPT_TABLE",payload:t.data}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(A.Provider,{value:{items:l.items,item:l.item,energyTableData:l.energyTableData,faultTableData:l.faultTableData,setParams:l.setParams,getItems:s,currentItem:function(e){console.log("currentItem===>",e),c({type:"CURRENT_ITEM",payload:e})},getSelectedTable:o,getEnergyOptimization:u,setParameters:i}},e.children)},Ve=function(e,a){switch(a.type){case"CHARTS_ITEM":return Object(f.a)({},e,{chartsitem:a.payload});case"CURRENT_CHART":return Object(f.a)({},e,{chartselected:a.payload});case"GET_MEDITIONS":return Object(f.a)({},e,{dataset:a.payload});case"MACHINE_CONDITION":return Object(f.a)({},e,{machineConditionData:a.payload});case"GRAPH_API":return Object(f.a)({},e,{graphApiData:a.payload});default:return e}},Xe=function(e){var a=Object(n.useReducer)(Ve,{chartsitem:[],dataset:[],chartselected:null,machineConditionData:null,graphApiData:null}),t=Object(v.a)(a,2),l=t[0],c=t[1],s=function(){var e=Object(ce.a)(le.a.mark((function e(a){var t;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ue.get("/api/charts",{params:{item:a}});case 3:t=e.sent,c({type:"CHARTS_ITEM",payload:t.data.charts}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("error");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(a){return e.apply(this,arguments)}}(),o=function(){var e=Object(ce.a)(le.a.mark((function e(){var a,t;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=[],e.next=4,K.a.get("https://hvac-api.herokuapp.com/api/machineCondition");case 4:t=e.sent,(t=JSON.parse(t.data)).data.map((function(e,n){var r=new Date(t.index[n]);r=r.toJSON().split("T")[0],a.push({label:r,value:e[0],threshold:e[1]})})),console.log("state of arr=-===>",a),c({type:"MACHINE_CONDITION",payload:a}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log("error",e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=Object(ce.a)(le.a.mark((function e(){var a;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,K.a.get("https://hvac-api.herokuapp.com/api/graphs");case 3:a=e.sent,c({type:"GRAPH_API",payload:a.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("error");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=Object(ce.a)(le.a.mark((function e(){var a;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ue.get("/api/dataset");case 3:a=e.sent,c({type:"GET_MEDITIONS",payload:a.data.dataset}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("error");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(j.Provider,{value:{chartsitem:l.chartsitem,chartselected:l.chartselected,dataset:l.dataset,getCharts:s,getDataset:u,machineConditionData:l.machineConditionData,graphApiData:l.graphApiData,getMachineCondition:o,getGraphApi:i}},e.children)},Je=function(e,a){switch(a.type){case"SHOW_DASHBOARD":return Object(f.a)({},e,{dashboard:"showing"});case"HIDE_DASHBOARD":return{dashboard:null};default:return e}},Ke=function(e){var a=Object(n.useReducer)(Je,{dashboard:"showing"}),t=Object(v.a)(a,2),l=t[0],c=t[1];return r.a.createElement(d.Provider,{value:{dashboard:l.dashboard,showDashboard:function(){c({type:"SHOW_DASHBOARD"})},hideDashboard:function(){c({type:"HIDE_DASHBOARD"})}}},e.children)},$e=t(82),Qe=function(e){var a=e.component,t=Object($e.a)(e,["component"]),l=Object(n.useContext)(p),c=l.autenticado,s=l.cargando,i=l.usuarioAutenticado;return Object(n.useEffect)((function(){i()}),[]),r.a.createElement(o.b,Object.assign({},t,{render:function(e){return c||s?r.a.createElement(a,e):r.a.createElement(o.a,{to:"/"})}}))},Ze=localStorage.getItem("token");Ze&&We(Ze);var ea=function(){return r.a.createElement(Ke,null,r.a.createElement(Ye,null,r.a.createElement(qe,null,r.a.createElement(Xe,null,r.a.createElement(He,null,r.a.createElement(Be,null,r.a.createElement(s.a,null,r.a.createElement(o.d,null,r.a.createElement(o.b,{exact:!0,path:"/",component:g}),r.a.createElement(Qe,{exact:!0,path:"/dashboard",component:Ue}),r.a.createElement(Qe,{exact:!0,path:"/alarm",component:he}),r.a.createElement(Qe,{exact:!0,path:"/energy",component:Me}),r.a.createElement(Qe,{exact:!0,path:"/ahu",component:ee}),r.a.createElement(o.b,{exact:!0,path:"/sign-in",component:O}),r.a.createElement(o.b,{exact:!0,path:"/register",component:T}),r.a.createElement(Qe,{exact:!0,path:"/admin",component:ne}),"                  "))))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(ea,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},87:function(e,a,t){e.exports=t(129)},92:function(e,a,t){},93:function(e,a,t){}},[[87,1,2]]]);
//# sourceMappingURL=main.6f7560e5.chunk.js.map