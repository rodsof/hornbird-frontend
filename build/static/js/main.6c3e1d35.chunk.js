(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{122:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(29),c=a.n(l),s=(a(91),a(92),a(13)),o=a(32),i=a(71),u=a(56),m=a(43),d=Object(n.createContext)(),p=Object(n.createContext)(),E=function(e){var t=Object(n.useContext)(d),a=t.dashboard,l=t.showDashboard,c=t.hideDashboard,o=Object(n.useContext)(p).cerrarSesion,i=e.tipo,E=!1;localStorage.getItem("token")&&(E=!0);return r.a.createElement("div",{className:"app-header"},E?r.a.createElement("div",{className:"col-1 nopadding"},r.a.createElement("button",{className:"btn btn-faBars",onClick:function(){a?c():l()}},r.a.createElement(u.a,{icon:m.a,size:"3x",color:"white"}))):null,E?r.a.createElement("div",{className:"col-4 nopadding"},r.a.createElement(s.b,{to:"/dashboard"},r.a.createElement("img",{src:"HBTLogo.png",alt:"logo",className:"logo"}))):r.a.createElement("div",{className:"col-4 nopadding"},r.a.createElement("img",{src:"HBTLogo.png",alt:"logo",className:"logo"})),E?r.a.createElement("div",{className:"quatro"},r.a.createElement("p",null,"System FDD, Prediction & Energy Optimization")):r.a.createElement("div",{className:"col-5 nopadding"}),E?null:r.a.createElement("div",{className:"col-1 nopadding"},r.a.createElement("button",{className:"btn btn-link btn-block"},r.a.createElement(s.b,{to:"/sign-in",className:"link"},"SIGN IN"))),E?null:r.a.createElement("div",{className:"col-1 nopadding"},r.a.createElement("button",{className:"btn btn-faBars"},r.a.createElement(u.a,{icon:m.b,size:"3x",color:"white"}))),E&&i?r.a.createElement("div",{className:"col-3 nopadding"},r.a.createElement("button",{className:"btn btn-link btn-block"},r.a.createElement(s.b,{to:"/admin",className:"link"},"Administration"))):null,E?r.a.createElement("div",{className:"col-1 nopadding"},r.a.createElement("button",{className:"btn btn-link btn-block",onClick:function(){return o()}},r.a.createElement(s.b,{to:"",className:"link"},"SIGN OUT"))):null,E?r.a.createElement("div",{className:"col-1 nopadding"},r.a.createElement("button",{className:"btn btn-faBars"},r.a.createElement(u.a,{icon:m.b,size:"3x",color:"white"}))):null)},h=Object(n.createContext)(),b=function(e){Object(n.useContext)(p).autenticado,Object(n.useContext)(h);var t=Object(n.useContext)(h),a=t.alarms,l=t.getAlarms;return a||l(),localStorage.getItem("token")&&e.history.push("/dashboard"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement(E,null)),r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"seccion-principal"},r.a.createElement(i.a,{url:"https://www.ventusky.com/",id:"ventusky",className:"ventusky",display:"block",position:"relative",allow:"geolocation"}))))},g=a(12),f=a(7),v=a(10),y=Object(n.createContext)(),O=function(e){var t=Object(n.useContext)(y),a=t.alerta,l=t.mostrarAlerta,c=Object(n.useContext)(p),o=c.mensaje,i=c.autenticado,u=c.registrarUsuario,m=c.cargando;Object(n.useEffect)((function(){i&&e.history.push("/dashboard"),o&&l(o.msg,o.categoria)}),[o,i,e.history]);var d=Object(n.useState)({name:"",email:"",password:"",confirm:""}),h=Object(v.a)(d,2),b=h[0],O=h[1],T=b.name,N=b.email,S=b.password,A=b.confirm,j=function(e){O(Object(f.a)({},b,Object(g.a)({},e.target.name,e.target.value)))};return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement(E,null)),r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"form-usuario"},a?r.a.createElement("div",{className:"alerta ".concat(a.categoria)}," ",a.msg," "):null,r.a.createElement("div",{className:"contenedor-form sombra-dark"},r.a.createElement("h1",null," CREATE AN ACCOUNT "),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),""!==T.trim()&&""!==N.trim()&&""!==S.trim()&&""!==A.trim()?S.length<6?l("Password must be at least 6 characters long","alerta-error"):S===A?u({name:T,email:N,password:S}):l("Los passwords no son iguales","alerta-error"):l("Please complete all fields","alerta-error")}},r.a.createElement("div",{className:"campo-form"},r.a.createElement("label",{htmlFor:"name"},"Name"),r.a.createElement("input",{type:"text",id:"name",name:"name",placeholder:"Your Name",value:T,onChange:j})),r.a.createElement("div",{className:"campo-form"},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{type:"email",id:"email",name:"email",placeholder:"Your Email",value:N,onChange:j})),r.a.createElement("div",{className:"campo-form"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",id:"password",name:"password",placeholder:"Your Password",value:S,onChange:j})),r.a.createElement("div",{className:"campo-form"},r.a.createElement("label",{htmlFor:"confirm"},"Confirm Password"),r.a.createElement("input",{type:"password",id:"confirm",name:"confirm",placeholder:"Repeat Password",onChange:j})),r.a.createElement("div",{className:"campo-form"},r.a.createElement("button",{type:"submit",className:"btn btn-primario btn-block",onChange:j,disabled:m},m?"Registering...":"Register"))),r.a.createElement(s.b,{to:"/",className:"btn btn-primario btn-block"},"HOME")))))},T=function(e){var t=Object(n.useContext)(y),a=t.alerta,l=t.mostrarAlerta,c=Object(n.useContext)(p),o=c.mensaje,i=c.autenticado,u=c.iniciarSesion;Object(n.useEffect)((function(){i&&e.history.push("/dashboard"),o&&l(o.msg,o.categoria)}),[i,o,e.history]);return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement(E,null)),r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"form-usuario"},a?r.a.createElement("div",{className:"alerta ".concat(a.categoria)}," ",a.msg," "):null,r.a.createElement("div",{className:"contenedor-form sombra-dark"},r.a.createElement("h1",null," SIGN IN "),r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=e.currentTarget,a=new FormData(t),n=a.get("email"),r=a.get("password");""!==n.trim()&&""!==r.trim()||l("Please complete all fields","alerta-error"),u({email:n,password:r})}},r.a.createElement("div",{className:"campo-form"},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{type:"email",id:"email",name:"email",placeholder:"Your Email"})),r.a.createElement("div",{className:"campo-form"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",id:"password",name:"password",placeholder:"Your Password"})),r.a.createElement("div",{className:"campo-form"},r.a.createElement("input",{type:"submit",className:"btn btn-primario btn-block",value:"Sign In"}))),r.a.createElement("button",{className:"btn btn-primario btn-block"},r.a.createElement(s.b,{to:"/register",className:"linkSignIn"},"Create Account")),r.a.createElement("button",{className:"btn btn-primario btn-block"},r.a.createElement(s.b,{to:"/",className:"linkSignIn"},"Home"))))))},N=function(){var e=Object(n.useContext)(y),t=e.alerta,a=e.mostrarAlerta,l=Object(n.useContext)(p),c=l.mensaje,s=l.agregarUsuario,o=l.cargando,i=l.getUsers;Object(n.useEffect)((function(){c&&a(c.msg,c.categoria)}),[c]);return r.a.createElement("div",{className:"col"},t?r.a.createElement("div",{className:"alerta ".concat(t.categoria)}," ",t.msg," "):null,r.a.createElement("h1",null," ADD MEMBER "),r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=e.currentTarget,n=new FormData(t),r=n.get("name"),l=n.get("email"),c=n.get("password"),o=n.get("confirm");""!==r.trim()&&""!==l.trim()&&""!==c.trim()&&""!==o.trim()?c.length<6?a("Password must be at least 6 characters long","alerta-error"):c===o?(s({name:r,email:l,password:c}),i()):a("Los passwords no son iguales","alerta-error"):a("Please complete all fields","alerta-error")}},r.a.createElement("div",{className:"campo-form"},r.a.createElement("label",{htmlFor:"name"},"Name"),r.a.createElement("input",{type:"text",id:"name",name:"name",placeholder:"Name"})),r.a.createElement("div",{className:"campo-form"},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{type:"email",id:"email",name:"email",placeholder:"Email"})),r.a.createElement("div",{className:"campo-form"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",id:"password",name:"password",placeholder:" Password"})),r.a.createElement("div",{className:"campo-form"},r.a.createElement("label",{htmlFor:"confirm"},"Confirm Password"),r.a.createElement("input",{type:"password",id:"confirm",name:"confirm",placeholder:"Repeat Password"})),r.a.createElement("div",{className:"campo-form"},r.a.createElement("button",{type:"submit",className:"btn btn-primario btn-block",disabled:o},o?"Registering...":"Add member"))))},S=function(e){var t=e.usuario,a=e.currentId,l=Object(n.useContext)(p),c=l.getUsers,s=l.deleteMember;return t._id===a?null:r.a.createElement("li",{className:"tarea sombra"},r.a.createElement("p",null," ",t.name," "),r.a.createElement("div",{className:"acciones"},r.a.createElement("button",{type:"button",className:"btn btn-secundario",onClick:function(){return e=t._id,s(e),void c();var e}},"Delete")))},A=a(132),j=a(123),x=function(e){var t=e.id,a=Object(n.useContext)(p),l=a.usuarios,c=a.getUsers;return Object(n.useEffect)((function(){c()}),[]),r.a.createElement(n.Fragment,null,r.a.createElement("h2",{className:"itemName"}," Members "),r.a.createElement("ul",{className:"listado-tareas"},r.a.createElement(A.a,null,l.map((function(e){return r.a.createElement(j.a,{key:e._id,timeout:200},r.a.createElement(S,{usuario:e,currentId:t}))})))))},k=Object(n.createContext)(),R=Object(n.createContext)(),C=function(e){var t=e.item,a=e.ai,l=Object(n.useContext)(k).currentItem,c=Object(n.useContext)(R).getCharts,s=function(e){l(e),c(e)};return r.a.createElement("li",{className:"sub-menu"},"#"!==t.href||a?null:r.a.createElement("a",{href:"#",className:"btn btn-primario btn-block",onClick:function(){return s(t._id)}},t.name),"#"!==t.href&&a?r.a.createElement("a",{className:"btn btn-primario btn-block",onClick:function(){return s(t._id)}},t.name):null)},w=a(75),D=a(124),I=a(129),U=a(125),P=a(22),M=a(23),_=a(26),H=a(24),F=a(27),L=a(51),W=a.n(L),G=function(e){function t(e){var a;return Object(P.a)(this,t),(a=Object(_.a)(this,Object(H.a)(t).call(this,e))).chartRef=r.a.createRef(),a}return Object(F.a)(t,e),Object(M.a)(t,[{key:"componentDidUpdate",value:function(){this.myChart.data.labels=this.props.data.map((function(e){return e.label})),this.myChart.data.datasets[0].data=this.props.data.map((function(e){return e.value})),this.myChart.update()}},{key:"componentDidMount",value:function(){this.myChart=new W.a(this.chartRef.current,{type:"line",options:{scales:{xAxes:[],yAxes:[{ticks:{min:0},scaleLabel:{display:!0,labelString:this.props.unit}}]}},data:{labels:this.props.data.map((function(e){return e.label})),datasets:[{label:this.props.title,data:this.props.data.map((function(e){return e.value})),fill:"none",backgroundColor:this.props.color,pointRadius:2,borderColor:this.props.color,borderWidth:1,lineTension:0}]}})}},{key:"render",value:function(){return r.a.createElement("canvas",{ref:this.chartRef})}}]),t}(r.a.Component),B=function(e){function t(e){var a;return Object(P.a)(this,t),(a=Object(_.a)(this,Object(H.a)(t).call(this,e))).canvasRef=r.a.createRef(),a}return Object(F.a)(t,e),Object(M.a)(t,[{key:"componentDidUpdate",value:function(){this.myChart.data.labels=this.props.data.map((function(e){return e.label})),this.myChart.data.datasets[0].data=this.props.data.map((function(e){return e.value})),this.myChart.update()}},{key:"componentDidMount",value:function(){this.myChart=new W.a(this.canvasRef.current,{type:"bar",options:{maintainAspectRatio:!1,scales:{xAxes:[{ticks:{max:this.props.max,min:this.props.min}}],yAxes:[{ticks:{min:0},scaleLabel:{display:!0,labelString:this.props.unit}}]}},data:{labels:this.props.data.map((function(e){return e.label})),datasets:[{label:this.props.title,data:this.props.data.map((function(e){return e.value})),backgroundColor:this.props.color}]}})}},{key:"render",value:function(){return r.a.createElement("canvas",{ref:this.canvasRef})}}]),t}(r.a.Component),Y=function(e){function t(){return Object(P.a)(this,t),Object(_.a)(this,Object(H.a)(t).apply(this,arguments))}return Object(F.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"card"+(this.props.plain?" card-plain":"")},r.a.createElement("div",{className:"header"+(this.props.hCenter?" text-center":"")},r.a.createElement("h4",{className:"title"},this.props.title),r.a.createElement("p",{className:"category"},this.props.category)),r.a.createElement("div",{className:"content"+(this.props.ctAllIcons?" all-icons":"")+(this.props.ctTableFullWidth?" table-full-width":"")+(this.props.ctTableResponsive?" table-responsive":"")+(this.props.ctTableUpgrade?" table-upgrade":"")},this.props.content,r.a.createElement("div",{className:"footer"},this.props.legend,null!=this.props.stats?r.a.createElement("hr",null):"",r.a.createElement("div",{className:"stats"},r.a.createElement("i",{className:this.props.statsIcon})," ",this.props.stats))))}}]),t}(n.Component),z=a(33),V=a.n(z),q=a(126),X=function(e){return r.a.createElement("div",{className:"content"},r.a.createElement(D.a,{fluid:!0},r.a.createElement(U.a,null,r.a.createElement(w.a,{md:12},r.a.createElement(Y,{title:"Data",category:"",ctTableFullWidth:!0,ctTableResponsive:!0,content:r.a.createElement(q.a,{striped:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Date"),r.a.createElement("th",null,"Value"))),r.a.createElement("tbody",null,e.charts.map((function(e){return r.a.createElement("tr",{key:V()()},r.a.createElement("td",null," ",e.label," "),r.a.createElement("td",null," ",e.value," "))}))))})))))},J=a(20),K=a.n(J);function Q(e){var t=new Date(e),a=("0"+(t.getMonth()+1)).slice(-2),n=("0"+t.getDate()).slice(-2);return[t.getFullYear(),a,n].join("-")}function $(e,t){for(var a=[],n=0;n<e.length;n++){var r=!1;if(a)for(var l=0;l<a.length;l++)a[l].label===Q(e[n].date)&&("CHW TIN"===t&&(a[l].value=a[l].value,r=!0),"CHW TOUT"===t&&(a[l].value=a[l].value,r=!0),"SA T"===t&&(a[l].value=a[l].value,r=!0),"SPACE T"===t&&(a[l].value=a[l].value,r=!0),"OA T"===t&&(a[l].value=a[l].value,r=!0),"SA DUCT ST PRESSURE"===t&&(a[l].value=a[l].value,r=!0),"OAT RH"===t&&(a[l].value=a[l].value,r=!0),"Space RH"===t&&(a[l].value=a[l].value,r=!0));r||("CHW TIN"===t&&a.push({label:Q(e[n].date),value:e[n].chwtin}),"CHW TOUT"===t&&a.push({label:Q(e[n].date),value:e[n].chwtout}),"SA T"===t&&a.push({label:Q(e[n].date),value:e[n].sat}),"SPACE T"===t&&a.push({label:Q(e[n].date),value:e[n].spacet}),"OA T"===t&&a.push({label:Q(e[n].date),value:e[n].oat}),"SA DUCT ST PRESSURE"===t&&a.push({label:Q(e[n].date),value:e[n].saductstpressure}),"OAT RH"===t&&a.push({label:Q(e[n].date),value:e[n].oatrh}),"Space RH"===t&&a.push({label:Q(e[n].date),value:e[n].spacerh}))}return a}function Z(e,t){var a=[];return"TEMPERATURE"===t&&(a.push({title:"CHW TOUT",unit:"\xbaC",data:$(e,"CHW TOUT"),color:"#9368E9"}),a.push({title:"CHW TIN",unit:"\xbaC",data:$(e,"CHW TIN"),color:"#FFA534"}),a.push({title:"OA T",data:$(e,"OA T"),color:"#87CB16",unit:"\xbaC"}),a.push({title:"SPACE T",unit:"\xbaC",data:$(e,"SPACE T"),color:"cd0000"}),a.push({title:"SA T",unit:"\xbaC",data:$(e,"SA T"),color:"#1DC7EA"})),"PRESSURE"===t&&a.push({title:"SA DUCT ST PRESSURE",unit:"Pa",data:$(e,"SA DUCT ST PRESSURE"),color:"#cd0000"}),"HUMIDITY"===t&&(a.push({title:"Space RH",unit:"RH",data:$(e,"Space RH"),color:"#cd0000"}),a.push({title:"OAT RH",unit:"RH",data:$(e,"OAT RH"),color:"#cd0000"})),a}var ee=function(){var e=Object(n.useContext)(R),t=e.getDataset,a=e.dataset,l=Object(n.useState)(null),c=Object(v.a)(l,2),s=c[0],o=c[1],i=Object(n.useState)(null),u=Object(v.a)(i,2),m=u[0],d=u[1],p=Object(n.useState)(null),E=Object(v.a)(p,2),h=E[0],b=E[1],g=Z(a,h);a||t();return setTimeout((function(){g=Z(a,h)}),36e4),null!==m?r.a.createElement(w.a,null,r.a.createElement("button",{className:"btn btn-secundario",onClick:function(e){e.preventDefault(),d(null)}}," Back "),r.a.createElement(Y,{statsIcon:"fa fa-clock-o",title:"feed",stats:"30 minutes ago",content:r.a.createElement("div",{id:"chartPreferences",className:"ct"},r.a.createElement(G,{data:g[m].data,title:g[m].title,color:g[m].color,unit:g[m].unit}))}),r.a.createElement(X,{charts:g[m].data})):r.a.createElement("main",{style:{paddingTop:20}},r.a.createElement(D.a,null,r.a.createElement("div",{className:"row nopadding"},r.a.createElement(I.a,null,"TEMPERATURE"===h?r.a.createElement(I.a.Toggle,{variant:"info",id:"dropdown-basic"},"Temperature  "):"PRESSURE"===h?r.a.createElement(I.a.Toggle,{variant:"info",id:"dropdown-basic"},"Pressure  "):"HUMIDITY"===h?r.a.createElement(I.a.Toggle,{variant:"info",id:"dropdown-basic"}," Humidity "):r.a.createElement(I.a.Toggle,{variant:"info",id:"dropdown-basic"},"Select Group"),r.a.createElement(I.a.Menu,null,r.a.createElement(I.a.Item,{onClick:function(e){e.preventDefault(),b("TEMPERATURE"),o(!0)}},"Temperature"),r.a.createElement(I.a.Item,{onClick:function(e){e.preventDefault(),b("PRESSURE"),o(!0)}},"Pressure"),r.a.createElement(I.a.Item,{onClick:function(e){e.preventDefault(),b("HUMIDITY"),o(!0)}},"Humidity"))),s?r.a.createElement(U.a,null,g.map((function(e,t){return r.a.createElement(w.a,{key:V()(),onClick:function(){d(t)}},r.a.createElement(Y,{statsIcon:"fa fa-clock-o",title:e.title,stats:"30 minutes ago",key:V()(),content:r.a.createElement("div",{id:"chartPreferences",className:"ct-chart ct-perfect-fourth"},r.a.createElement(B,{data:e.data,title:e.title,color:e.color,unit:e.unit}))}))}))):null)))},te=function(e){var t=e.ai,a=Object(n.useContext)(k),l=a.items,c=a.getItems;a.currentItem;return Object(n.useEffect)((function(){c()}),[]),r.a.createElement("ul",{className:"links"},r.a.createElement(A.a,null,l.map((function(e){return r.a.createElement(j.a,{key:e._id,timeout:200,classNames:"proyecto"},r.a.createElement(C,{item:e,ai:t}))}))),r.a.createElement("li",null))},ae=function(){return Object(n.useContext)(d).dashboard?r.a.createElement("aside",null,r.a.createElement("div",{id:"sidebar",className:"nav-collapse "},r.a.createElement("ul",{className:"sidebar-menu"},r.a.createElement("li",{className:"active"},r.a.createElement("a",{className:"btn btn-primario btn-block",href:"/"},r.a.createElement("i",{className:"icon_house_alt"}),r.a.createElement("span",null,"Dashboard"))),r.a.createElement(te,{ai:!1}),r.a.createElement("li",{className:"active"},r.a.createElement("a",{className:"btn btn-primario btn-block",href:"/"},r.a.createElement("i",{className:"icon_house_alt"}),r.a.createElement("span",null,"Artificial Intelligence"))),r.a.createElement(te,{ai:!0})))):null},ne=function(){var e=Object(n.useContext)(p),t=e.usuario,a=e.usuarioAutenticado,l=Object(n.useContext)(d).dashboard;Object(n.useEffect)((function(){a()}),[]);var c=" ",s=!1,o=" ";return t&&(s=t.admin,c=t.name,o=t._id),r.a.createElement("div",{className:"row nopadding"},r.a.createElement("div",{className:"col-md-12 nopadding"},r.a.createElement(E,null)),l?r.a.createElement("div",{className:"col-md-3 nopadding"},r.a.createElement(ae,null)):null,s?r.a.createElement("div",{className:"col-md-2 nopadding"},r.a.createElement(x,{id:o})):null,r.a.createElement("div",{className:"col-md-7"},r.a.createElement("main",null,r.a.createElement("li",{className:"tarea sombra"},r.a.createElement("p",null,c," : ",s?r.a.createElement("span",null,"Administrator"):null," "),s?r.a.createElement("div",{className:"acciones"},r.a.createElement(N,null)):r.a.createElement("p",null," User ")))))},re=a(6),le=a.n(re),ce=a(9),se=a(127),oe=a(130),ie=K.a.create({baseURL:"https://aqueous-anchorage-35192.herokuapp.com/"}),ue=function(e){function t(e){var a;return Object(P.a)(this,t),(a=Object(_.a)(this,Object(H.a)(t).call(this,e))).handleSubmit=function(){var e=Object(ce.a)(le.a.mark((function e(t){var n,r,l,c;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=t.currentTarget,r=new FormData(n),a.setState({isSending:!0}),l=a.props.alarm.message+". ",c=a.props.alarm._id,e.next=8,ie.post("/api/alarms",{message:"Hi! This alarm was assigned to you: ".concat(l),email:r.get("email"),id:c}).then((function(e){if("Message sent"===e.data)n.reset(),a.setState({isSent:!0}),setTimeout((function(){a.setState({isSent:!1})}),14e3);else{a.setState({errors:e.data});var t=3e3*a.state.errors.length;setTimeout((function(){a.setState({errors:[]})}),t)}})).catch((function(e){return console.log(e)})).finally((function(){return a.setState({isSending:!1})}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.state={isSending:!1,isSent:!1,errors:[]},a}return Object(F.a)(t,e),Object(M.a)(t,[{key:"showContactForm",value:function(){var e=this.state,t=e.isSending,a=e.isSent,n=e.errors;return n.length>0?n.map((function(e,t){return r.a.createElement(se.a,{key:t,variant:"danger"},e.msg)})):a?r.a.createElement(U.a,{className:"h-100 justify-content-center align-items-center"},r.a.createElement(w.a,{className:"text-center",md:12},r.a.createElement(se.a,{variant:"success"},"MESSAGE SENT (Refresh page to see changes) "))):r.a.createElement(oe.a,{className:"formContact",onSubmit:this.handleSubmit},r.a.createElement(oe.a.Group,{as:w.a}),r.a.createElement(oe.a.Group,{className:"pl-3"},r.a.createElement("a",{href:"mailto:?subject=ALARM ASSIGNED TO YOU me&body=This alarm was assigned to you: ".concat(this.props.alarm.message),className:"btn btn-primary btn-alert"},t?"Sending...":"Send Message")))}},{key:"render",value:function(){return r.a.createElement(D.a,{className:"h-100"},this.showContactForm())}}]),t}(n.Component),me=function(e){function t(e){var t=new Date(e),a=("0"+(t.getMonth()+1)).slice(-2),n=("0"+t.getDate()).slice(-2),r=t.getHours(),l=t.getMinutes(),c=t.getSeconds(),s=r>=12?"pm":"am";return r=(r%=12)||12,l=l<10?"0"+l:l,[t.getFullYear(),a,n].join("-")+" "+r+":"+l+" "+c+" "+s}return r.a.createElement("div",{className:"content"},r.a.createElement(D.a,{fluid:!0},r.a.createElement(U.a,null,r.a.createElement(w.a,{md:12},r.a.createElement(Y,{title:"Alarms",category:"",ctTableFullWidth:!0,ctTableResponsive:!0,content:r.a.createElement(q.a,{striped:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Alarm Description"),r.a.createElement("th",null,"Start"),r.a.createElement("th",null,"Status"),r.a.createElement("th",null,"Close Date"),r.a.createElement("th",null,"Assign To"),r.a.createElement("th",null,"Assign Date"))),r.a.createElement("tbody",null,e.alarms.map((function(e){return r.a.createElement("tr",{key:V()()},r.a.createElement("td",null," ",e.message," "),r.a.createElement("td",null," ",t(e.start)," "),r.a.createElement("td",null," ",e.status," "),r.a.createElement("td",null," ",e.closeDate," "),e.assignTo?r.a.createElement("td",null," ",e.assignTo," "):r.a.createElement("td",null,r.a.createElement(ue,{alarm:e})),r.a.createElement("td",null," ",e.assignDate?t(e.assignDate):null," "))}))))})))))};function de(e){var t=new Date(e),a=("0"+(t.getMonth()+1)).slice(-2),n=("0"+t.getDate()).slice(-2),r=t.getHours(),l=t.getMinutes(),c=t.getSeconds(),s=r>=12?"pm":"am";return r=(r%=12)||12,l=l<10?"0"+l:l,[t.getFullYear(),a,n].join("-")+" "+r+":"+l+" "+c+" "+s}function pe(e,t){var a,n=[],r=new Date;if(t.length>0){a=t[t.length-1].start;for(var l=0;l<t.length;l++)(!a||t[l].start>a)&&(a=t[l].start)}else a=r;for(var c=0;c<e.length;c++)de(e[c].date)>de(a)&&(console.log(de(e[c].date)+"y "+de(a)),e[c].saductstpressure<=90&&e[c].safanfrequency<60&&n.push({message:"SA Fan Unable to Reach Maximum Frequency",status:"Open",start:e[c].date,assignTo:null,assignDate:null}),e[c].spacet>=24&&60===e[c].safanfrequency&&e[c].chwvalveposition<100&&n.push({message:"CHW Valve Not Fully Open",status:"Open",start:e[c].date,assignTo:null,assignDate:null}),e[c].spacet<=22&&40===e[c].safanfrequency&&e[c].chwvalveposition>0&&n.push({message:"CHW Valve Not Fully Closed",status:"Open",start:e[c].date,assignTo:null,assignDate:null}),e[c].saductstpressure>=110&&e[c].safanfrequency>40&&n.push({message:"SA Fan Unable to Reach Minimum Frequency",status:"Open",start:e[c].date,assignTo:null,assignDate:null}),e[c].saductstpressure<=90&&e[c].safr<1e3&&n.push({message:"SA Fan Flow Rate Unable to Reach Maximum",status:"Open",start:e[c].date,assignTo:null,assignDate:null}),e[c].saductstpressure>=110&&e[c].safr>600&&n.push({message:"SA Fan Flow Rate Unable to Reach Minimum",status:"Open",start:e[c].date,assignTo:null,assignDate:null}),e[c].space<=400&&e[c].oadamperopen>0&&n.push({message:"OA Damper Unable to Reach Minimum Position",status:"Open",start:e[c].date,assignTo:null,assignDate:null}),e[c].space>=2400&&e[c].oadamperopen<30&&n.push({message:"OA Damper Unable to Reach Maximum Position",status:"Open",start:e[c].date,assignTo:null,assignDate:null}));return n}var Ee=function(e){var t=e.alarms,a=e.dataset,n=pe(a,t),l=function(){var e=Object(ce.a)(le.a.mark((function e(t){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ie.post("/api/alarms/addAlarms",t);case 3:e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();if(n.length>0){for(var c=0;c<n.length;c++){l({message:n[c].message,status:n[c].status,start:new Date(n[c].start),assignTo:null,assignDate:null})}n=[]}return setTimeout((function(){t.length>0&&pe(a)}),36e5),r.a.createElement(w.a,null,r.a.createElement(me,{alarms:t}))},he=function(e){function t(){return Object(P.a)(this,t),Object(_.a)(this,Object(H.a)(t).apply(this,arguments))}return Object(F.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"card card-stats bg-".concat(this.props.bg)},r.a.createElement("div",{className:"content"},r.a.createElement(U.a,null,r.a.createElement(w.a,{xs:6},r.a.createElement("div",{className:"numbers"},r.a.createElement("p",null,this.props.statsText1),r.a.createElement("p",null," ",this.props.statsValue1," ",this.props.unit," "))),r.a.createElement(w.a,{xs:6},r.a.createElement("div",{className:"numbers"},r.a.createElement("p",null,this.props.statsText2),r.a.createElement("p",null," ",this.props.statsValue2," ",this.props.unit," ")))),r.a.createElement("div",{className:"footer"},r.a.createElement("hr",null),!isNaN(this.props.amount)&&isFinite(this.props.amount)?r.a.createElement("span",null,"Change: ",this.props.amount," %"):null,r.a.createElement("hr",null),r.a.createElement("div",{className:"stats"},this.props.statsIcon," ",this.props.statsIconText))))}}]),t}(n.Component),be=a(39),ge=a.n(be);function fe(e){var t=new Date(e),a=("0"+(t.getMonth()+1)).slice(-2),n=("0"+t.getDate()).slice(-2);return[t.getFullYear(),a,n].join("-")}var ve=function(){var e,t=Object(n.useContext)(R),a=t.getDataset,l=t.dataset,c={},s={},o=[];Object(n.useContext)(p);return l?(s=function(e){for(var t=0,a=0,n=0,r=0,l=0,c=0,s=new Date,o=s.getFullYear()+"-"+(s.getMonth()+1)+"-"+s.getDate(),i=0;i<e.length;i++){var u=new Date(e[i].date);fe(e[i].date)===fe(o)&&e[i].energymonthly,u.getMonth()===s.getMonth()&&(n+=e[i].energymonthly),u.getMonth()===s.getMonth()-1&&(r+=e[i].energymonthly);var m=ge()(),d=ge()(e[i].date),p=ge()().subtract(7,"days"),E=ge()().subtract(1,"years"),h=m.isoWeek()===d.isoWeek(),b=d.isoWeek()==p.isoWeek(),g=m.isoWeekYear()===d.isoWeekYear(),f=m.isoWeekYear()===E.isoWeekYear();h&&(l+=e[i].energymonthly),b&&(c+=e[i].energymonthly),g&&(t+=e[i].energymonthly),f&&(a+=e[i].energymonthly)}return{thisYearEnergy:t,lastYearEnergy:a,monthlyEnergy:n,lastMonthEnergy:r,weeklyEnergy:l,lastWeekEnergy:c,yearlyAmount:t/a,monthlyAmount:n/r,weeklyAmount:l/c}}(l),l.length>0&&(e=l[l.length-1].date),c=function(e){for(var t=[],a=0;a<e.length;a++)t.push({label:fe(e[a].date),value:e[a].ahucop});return t}(l),o=function(e){for(var t=[],a=0;a<e.length;a++){var n=!1;if(t)for(var r=0;r<t.length;r++)t[r].label===fe(e[a].date)&&(t[r].value=t[r].value+e[a].energymonthly,n=!0);n||t.push({label:fe(e[a].date),value:e[a].energymonthly})}return t}(l)):a(),r.a.createElement(D.a,null,r.a.createElement(U.a,null,r.a.createElement("div",{className:"col-3"},r.a.createElement("div",{className:"row nopadding"},r.a.createElement(he,{statsValue2:s.thisYearEnergy,statsValue1:s.lastYearEnergy,unit:"KW-Hr",statsText2:"This Year",statsText1:"Last Year",amount:s.yearlyAmount,bg:"success",bigIcon:r.a.createElement("i",{className:"pe-7s-graph1 text-danger"}),statsIcon:r.a.createElement("i",{className:"fa fa-clock-o"}),statsIconText:"This Year"})),r.a.createElement("div",{className:"row nopadding"},r.a.createElement(he,{statsValue1:s.lastWeekEnergy,statsValue2:s.weeklyEnergy,unit:"KW-Hr",statsText1:"Last Week",statsText2:"This Week",amount:s.weeklyAmount,bg:"info",bigIcon:r.a.createElement("i",{className:"pe-7s-graph1 text-danger"}),statsIcon:r.a.createElement("i",{className:"fa fa-clock-o"}),statsIconText:"This Week "})),r.a.createElement("div",{className:"row nopadding"},r.a.createElement(he,{statsValue1:s.lastMonthEnergy,statsValue2:s.monthlyEnergy,unit:"KW-Hr",statsText1:"Last Month",statsText2:"This Month",amount:s.monthlyAmount,bg:"danger",bigIcon:r.a.createElement("i",{className:"pe-7s-graph1 text-danger"}),statsIcon:r.a.createElement("i",{className:"fa fa-clock-o"}),statsIconText:"This Month"}))),r.a.createElement("div",{className:"col-9"},r.a.createElement(Y,{statsIcon:"fa fa-history",id:"chartHours",title:"Energy",category:"Energy",stats:"Updated 30 minutes ago",content:r.a.createElement("div",{className:"ct-chart"},r.a.createElement(B,{data:o,title:"Energy",color:"#2F4B8A",max:e,min:void 0,unit:"kWh"}))}))),r.a.createElement(U.a,null,r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"row nopadding"},r.a.createElement(Y,{statsIcon:"fa fa-history",id:"chartHours",title:"AHU COP",category:"AHU COP",stats:"Updated 30 minutes ago",content:r.a.createElement("div",{className:"ct"},r.a.createElement(G,{data:c,title:"AHU COP",color:"#FA0000",unit:""}))})))))},ye=a(131),Oe=function(e){return r.a.createElement(ye.a,{style:{padding:"30px"}},r.a.createElement(q.a,{striped:!0,bordered:!0,hover:!0,style:{marginTop:"20px"}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"DATE"),r.a.createElement("th",null,"POWER CONSUMPTION"),r.a.createElement("th",null,"ACTUAL SA FAN FREQUENCY"),r.a.createElement("th",null,"PREDICTED VALUE"))),r.a.createElement("tbody",null,e.data.map((function(e){return r.a.createElement("tr",null,r.a.createElement("td",null,e.date),r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.condition),r.a.createElement("td",null,e.params))})))))},Te=[{date:"02/12/2020 12:03:34",name:"Actuator",condition:"Short description",params:"Range",value:"+30"},{date:"02/12/2020 12:03:34",name:"Sensor",condition:"Short description",params:"Range",value:"+45"},{date:"02/12/2020 12:03:34",name:"Motor",condition:"Short description",params:"Range",value:"-12"}],Ne=[],Se=[],Ae=[],je=[];function xe(e,t){for(var a=[],n=0;n<e.length;n++)a.push({label:e[n],value:t[n]});return a}var ke=function(e){var t=Object(n.useContext)(p),a=t.usuarioAutenticado,l=t.getUsers,c=(t.usuarios,Object(n.useContext)(k)),s=c.item,o=c.getEnergyOptimization,i=c.energyTableData,u=(Object(n.useContext)(d).dashboard,Object(n.useContext)(R)),m=u.getDataset,E=(u.dataset,u.getGraphApi),h=u.graphApiData;return Object(n.useEffect)((function(){a()}),[]),Object(n.useEffect)((function(){l(),m(),E(),o()}),[s]),s&&s[0].name,h&&(Ne=xe(h.X1,h.y1),Se=xe(h.X2,h.y2),Ae=xe(h.X3,h.y3),je=xe(h.X4,h.y4)),console.log("energyTableData=-=>",i),r.a.createElement("div",{className:"col-md-9 nopadding"},r.a.createElement("main",{style:{paddingTop:20}},r.a.createElement(D.a,null,r.a.createElement(U.a,null,r.a.createElement(w.a,null,r.a.createElement("h4",null,"Energy Optimization"))),r.a.createElement("hr",null),r.a.createElement("br",null),r.a.createElement(U.a,null,r.a.createElement(w.a,null,r.a.createElement("h4",null,"dT Air SA Fan Frequency"))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{className:"ct-chart",style:{height:300,width:"33%",display:"inline-block"}},r.a.createElement(B,{data:Ne,title:"Energy",color:"#2F4B8A",max:void 0,min:void 0,unit:"kWh"})),r.a.createElement("div",{className:"ct-chart",style:{height:300,width:"33%",display:"inline-block"}},r.a.createElement(B,{data:Se,title:"Energy",color:"#2F4B8A",max:void 0,min:void 0,unit:"kWh"}))," ",r.a.createElement("div",{className:"ct-chart",style:{height:300,width:"33%",display:"inline-block"}},r.a.createElement(B,{data:Ae,title:"Energy",color:"#2F4B8A",max:void 0,min:void 0,unit:"kWh"})),r.a.createElement("div",{className:"ct-chart",style:{height:300,width:"33%",display:"inline-block"}},r.a.createElement(B,{data:je,title:"Energy",color:"#2F4B8A",max:void 0,min:void 0,unit:"kWh"})),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(U.a,null,r.a.createElement(w.a,null,r.a.createElement("h4",{style:{marginBottom:20}},"Optimization"))),r.a.createElement(Oe,{data:Te}),r.a.createElement(U.a,null,r.a.createElement(w.a,null,r.a.createElement("h4",{style:{marginBottom:20}},"Optimization"))),r.a.createElement(Oe,{data:Te}),r.a.createElement(U.a,null,r.a.createElement(w.a,null,r.a.createElement("h4",{style:{marginBottom:20}},"Optimization"))),r.a.createElement(Oe,{data:Te}))))},Re=a(128),Ce=a(79),we=a(82),De=function(e){var t=Object(n.useState)(!1),a=Object(v.a)(t,2),l=a[0],c=a[1],s=Object(n.useState)(""),o=Object(v.a)(s,2),i=o[0],u=o[1],m=Object(n.useState)(""),d=Object(v.a)(m,2),p=d[0],E=d[1],h=Object(n.useState)(""),b=Object(v.a)(h,2),g=b[0],f=b[1],y=[];if(e.faultTableData)for(var O in e.faultTableData){JSON.parse(e.faultTableData[O]);y.push({name:O})}return r.a.createElement(ye.a,{style:{padding:"30px"}},r.a.createElement(Re.a,{show:l,size:"sm","aria-labelledby":"contained-modal-title-vcenter",centered:!0},r.a.createElement(Re.a.Header,null,r.a.createElement(Re.a.Title,{id:"contained-modal-title-vcenter"},"Enter Parameters")),r.a.createElement(Re.a.Body,null,r.a.createElement(oe.a,null,r.a.createElement(oe.a.Group,{controlId:"formBasicEmail"},r.a.createElement(oe.a.Label,null,"Name"),r.a.createElement(oe.a.Control,{type:"text",placeholder:"Name",value:i,onChange:function(e){return u(e.target.value)}})),r.a.createElement(oe.a.Group,{controlId:"formBasicPassword"},r.a.createElement(oe.a.Label,null,"Lower"),r.a.createElement(oe.a.Control,{type:"text",placeholder:"Lower",value:p,onChange:function(e){return E(e.target.value)}})),r.a.createElement(oe.a.Group,{controlId:"formBasicPassword"},r.a.createElement(oe.a.Label,null,"Upper"),r.a.createElement(oe.a.Control,{type:"text",placeholder:"Upper",value:g,onChange:function(e){return f(e.target.value)}})))),r.a.createElement(Re.a.Footer,null,r.a.createElement(Ce.a,{variant:"success",onClick:function(){i&&p&&g?(e.setParameters(i,p,g),c(!1)):alert("Please enter fields properly")}},"Submit"),r.a.createElement(Ce.a,{onClick:function(){return c(!1)}},"Close"))),r.a.createElement(I.a,null,r.a.createElement(I.a.Toggle,{id:"dropdown-basic"},"Select"),r.a.createElement(I.a.Menu,null,r.a.createElement(I.a.Item,{href:"#/action-1",onSelect:function(){return e.getSelectedItems("sensor")}},"Sensor"),r.a.createElement(I.a.Item,{href:"#/action-2",onSelect:function(){return e.getSelectedItems("actuator")}},"Actuator"),r.a.createElement(I.a.Item,{href:"#/action-3",onSelect:function(){return e.getSelectedItems("motor")}},"Motor"))),r.a.createElement(q.a,{striped:!0,bordered:!0,hover:!0,style:{marginTop:"20px"}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"HEALTH CONDITION"),r.a.createElement("th",null,"SET PARAMETERS"),r.a.createElement("th",null,"VALUE"))),r.a.createElement("tbody",null,e.data.map((function(e,t){return r.a.createElement("tr",null,r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.condition),r.a.createElement("td",null,e.params," ",r.a.createElement("span",{onClick:function(){return c(!0)},style:{float:"right",padding:"5px",cursor:"pointer"}},r.a.createElement(we.a,{color:"gray",size:20}))),r.a.createElement("td",null,e.value))})))))},Ie=[{date:"02/12/2020 12:03:34",name:"Actuator",condition:"Short description",params:"Range",value:"+30"},{date:"02/12/2020 12:03:34",name:"Sensor",condition:"Short description",params:"Range",value:"+45"},{date:"02/12/2020 12:03:34",name:"Motor",condition:"Short description",params:"Range",value:"-12"}],Ue=function(e){var t=Object(n.useContext)(p),a=t.usuarioAutenticado,l=t.getUsers,c=(t.usuarios,Object(n.useContext)(k)),s=c.item,o=c.getSelectedTable,i=c.faultTableData,u=c.setParameters,m=(c.setParams,Object(n.useContext)(d).dashboard,Object(n.useContext)(R)),E=m.getDataset,h=m.dataset,b=m.getMachineCondition,g=m.machineConditionData;Object(n.useEffect)((function(){a()}),[]),Object(n.useEffect)((function(){l(),E(),b(),o()}),[s]),s&&s[0].name;return console.log("getMachineCondition=-=>",g),r.a.createElement("div",{className:"col-md-9 nopadding"},r.a.createElement("main",{style:{paddingTop:20}},r.a.createElement(D.a,null,r.a.createElement(U.a,null,r.a.createElement(w.a,null,r.a.createElement("h4",null,"Fault Predictions"))),r.a.createElement("hr",null),r.a.createElement("br",null),r.a.createElement(U.a,null,r.a.createElement(w.a,null,r.a.createElement("h4",null,"Condition Monitoring"))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{className:"ct-chart",style:{width:"500px",alignSelf:"flex-end"}},r.a.createElement(G,{data:g||h,title:"Energy",color:"#2F4B8A",max:.01,min:0,unit:"kWh"}),r.a.createElement("h5",{style:{marginLeft:"200px"}},"Date / Time")),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(U.a,null,r.a.createElement(w.a,null,r.a.createElement("h4",null,"Anamoly Detector"))),r.a.createElement(De,{data:Ie,getSelectedItems:function(e){o(e)},setParameters:u,faultTableData:i}))))},Pe=function(e){var t,a=Object(n.useContext)(p),l=a.usuarioAutenticado,c=a.getUsers,s=a.usuarios,o=a.usuario,i=Object(n.useContext)(k).item,u="",m=Object(n.useContext)(R),b=m.getDataset,g=m.dataset,f=Object(n.useContext)(d).dashboard,v=Object(n.useContext)(h),y=v.alarms,O=v.getAlarms;return Object(n.useEffect)((function(){l()}),[]),Object(n.useEffect)((function(){c(),b(),O()}),[i]),i&&(u=i[0].name),o&&(t=o.admin),localStorage.getItem("token")||e.history.push("/"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12 nopadding"},r.a.createElement(E,{usuario:o,tipo:t})),f?r.a.createElement("div",{className:"col-md-2 nopadding"},r.a.createElement(ae,null)):null,r.a.createElement("div",{className:"col-md-10 nopadding"},r.a.createElement("main",null,i?"FDD Alarms"===u?r.a.createElement(Ee,{usuarios:s,dataset:g,alarms:y}):"Energy"===u?r.a.createElement(ve,null):"Energy Optimization"===u?r.a.createElement(ke,null):"Anomaly Prediction"===u?r.a.createElement(Ue,null):r.a.createElement(ee,null):r.a.createElement(ve,null))))},Me=function(e,t){switch(t.type){case"MOSTRAR_ALERTA":return{alerta:t.payload};case"OCULTAR_ALERTA":return{alerta:null};default:return e}},_e=function(e){var t=Object(n.useReducer)(Me,{alerta:null}),a=Object(v.a)(t,2),l=a[0],c=a[1];return r.a.createElement(y.Provider,{value:{alerta:l.alerta,mostrarAlerta:function(e,t){c({type:"MOSTRAR_ALERTA",payload:{msg:e,categoria:t}}),setTimeout((function(){c({type:"OCULTAR_ALERTA"})}),5e3)}}},e.children)},He=a(83),Fe=function(e,t){switch(t.type){case"LOGIN_EXITOSO":case"REGISTRO_EXITOSO":return localStorage.setItem("token",t.payload.token),Object(f.a)({},e,{autenticado:!0,mensaje:null,cargando:!1});case"LOGIN_ERROR":case"REGISTRO_ERROR":case"CERRAR_SESION":return localStorage.removeItem("token"),Object(f.a)({},e,{token:null,usuario:null,autenticado:null,mensaje:t.payload,cargando:!1});case"OBTENER_USUARIO":return Object(f.a)({},e,{autenticado:!0,usuario:t.payload,cargando:!1});case"DELETE_MEMBER":return Object(f.a)({},e,{usuarios:e.usuarios.filter((function(e){return e.id!==t.payload}))});case"OBTENER_USUARIOS":return Object(f.a)({},e,{usuarios:t.payload});case"AGREGAR_USUARIO":return Object(f.a)({},e,{usuarios:[t.payload].concat(Object(He.a)(e.usuarios))});default:return e}},Le=function(e){e?ie.defaults.headers.common["x-auth-token"]=e:delete ie.defaults.headers.common["x-auth-token"]},We=function(e){var t={token:localStorage.getItem("token"),autenticado:null,usuario:null,usuarios:[],mensaje:null,cargando:!0},a=Object(n.useReducer)(Fe,t),l=Object(v.a)(a,2),c=l[0],s=l[1],o=function(){var e=Object(ce.a)(le.a.mark((function e(){var t,a;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=localStorage.getItem("token"))&&Le(t),e.prev=2,e.next=5,ie.get("/api/auth");case 5:a=e.sent,s({type:"OBTENER_USUARIO",payload:a.data.usuario}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0.response),s({type:"LOGIN_ERROR"});case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=Object(ce.a)(le.a.mark((function e(t){var a,n;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ie.post("/api/usuarios",t);case 3:a=e.sent,s({type:"REGISTRO_EXITOSO",payload:a.data}),o(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),n={msg:e.t0.response.data.msg,categoria:"alerta-error"},s({type:"REGISTRO_ERROR",payload:n});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(ce.a)(le.a.mark((function e(t){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ie.post("/api/usuarios",t);case 3:e.sent,console.log(t),s({type:"AGREGAR_USUARIO",payload:t}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(ce.a)(le.a.mark((function e(){var t,a;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=localStorage.getItem("token"))&&Le(t),e.prev=2,e.next=5,ie.get("/api/usuarios");case 5:a=e.sent,s({type:"OBTENER_USUARIOS",payload:a.data.users}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0.response);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=Object(ce.a)(le.a.mark((function e(t){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ie.delete("/api/usuarios/".concat(t));case 3:s({type:"DELETE_MEMBER",payload:t}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(ce.a)(le.a.mark((function e(t){var a,n;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ie.post("/api/auth",t);case 3:a=e.sent,s({type:"LOGIN_EXITOSO",payload:a.data}),o(),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.response.data.msg),n={msg:e.t0.response.data.msg,categoria:"alerta-error"},s({type:"LOGIN_ERROR",payload:n});case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(p.Provider,{value:{token:c.token,autenticado:c.usuario,usuario:c.usuario,usuarios:c.usuarios,mensaje:c.mensaje,cargando:c.cargando,registrarUsuario:i,agregarUsuario:u,usuarioAutenticado:o,getUsers:m,deleteMember:d,iniciarSesion:E,cerrarSesion:function(){s({type:"CERRAR_SESION"})}}},e.children)},Ge=function(e,t){switch(t.type){case"GET_ALARMS":return Object(f.a)({},e,{alarms:t.payload});default:return e}},Be=function(e){var t=Object(n.useReducer)(Ge,{alarms:[]}),a=Object(v.a)(t,2),l=a[0],c=a[1],s=function(){var e=Object(ce.a)(le.a.mark((function e(t){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ie.post("/api/alarms/addAlarms",t);case 3:e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=Object(ce.a)(le.a.mark((function e(){var t;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ie.get("/api/alarms");case 3:t=e.sent,c({type:"GET_ALARMS",payload:t.data.alarms}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.response);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(h.Provider,{value:{alarms:l.alarms,createAlarm:s,getAlarms:o}},e.children)},Ye=function(e,t){switch(t.type){case"GET_ITEMS":return Object(f.a)({},e,{items:t.payload});case"CURRENT_ITEM":return Object(f.a)({},e,{item:e.items.filter((function(e){return e._id===t.payload}))});case"ENERGY_OPT_TABLE":return Object(f.a)({},e,{energyTableData:t.payload});case"GET_FAULT_TABLE":return Object(f.a)({},e,{faultTableData:t.payload});case"SET_PARAMETERS":return Object(f.a)({},e,{setParams:t.payload});default:return e}},ze=function(e){var t=Object(n.useReducer)(Ye,{items:[],item:null,faultTableData:null,energyTableData:null,setParams:null}),a=Object(v.a)(t,2),l=a[0],c=a[1],s=function(){var e=Object(ce.a)(le.a.mark((function e(){var t;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ie.get("/api/items");case 3:t=e.sent,c({type:"GET_ITEMS",payload:t.data.items}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),o=function(){var e=Object(ce.a)(le.a.mark((function e(){var t,a,n,r,l=arguments;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:"actuator",console.log("data",t),e.prev=2,e.next=5,K.a.get("https://facialrecognition-1.herokuapp.com/api/".concat(t));case 5:for(r in a=e.sent,console.log("result.data=====>",a.data),n=[],a.data)n.push({name:r,condition:a.data[r].status,value:a.data[r].anamoly_value,lower:a.data[r].lower_value,upper:a.data[r].upper_value,date:a.data[r].date});c({type:"GET_FAULT_TABLE",payload:n}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=Object(ce.a)(le.a.mark((function e(t,a,n){var r,l;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("name,lower,upper",t,a,n),r={name:t,lower:a,upper:n},e.prev=2,e.next=5,K.a.post("https://facialrecognition-1.herokuapp.com/api/setParameters",r);case 5:l=e.sent,console.log("result",l),l.data&&alert(l.data.msg),c({type:"SET_PARAMETERS",payload:l.data}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t,a,n){return e.apply(this,arguments)}}(),u=function(){var e=Object(ce.a)(le.a.mark((function e(){var t,a,n=arguments;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:"actuator",console.log("data",t),e.prev=2,e.next=5,K.a.get("https://facialrecognition-1.herokuapp.com/api/Optimization");case 5:a=e.sent,console.log("result energytable===?",a.data),c({type:"ENERGY_OPT_TABLE",payload:a.data}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(k.Provider,{value:{items:l.items,item:l.item,energyTableData:l.energyTableData,faultTableData:l.faultTableData,setParams:l.setParams,getItems:s,currentItem:function(e){c({type:"CURRENT_ITEM",payload:e})},getSelectedTable:o,getEnergyOptimization:u,setParameters:i}},e.children)},Ve=function(e,t){switch(t.type){case"CHARTS_ITEM":return Object(f.a)({},e,{chartsitem:t.payload});case"CURRENT_CHART":return Object(f.a)({},e,{chartselected:t.payload});case"GET_MEDITIONS":return Object(f.a)({},e,{dataset:t.payload});case"MACHINE_CONDITION":return Object(f.a)({},e,{machineConditionData:t.payload});case"GRAPH_API":return Object(f.a)({},e,{graphApiData:t.payload});default:return e}},qe=function(e){var t=Object(n.useReducer)(Ve,{chartsitem:[],dataset:[],chartselected:null,machineConditionData:null,graphApiData:null}),a=Object(v.a)(t,2),l=a[0],c=a[1],s=function(){var e=Object(ce.a)(le.a.mark((function e(t){var a;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ie.get("/api/charts",{params:{item:t}});case 3:a=e.sent,c({type:"CHARTS_ITEM",payload:a.data.charts}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("error");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=Object(ce.a)(le.a.mark((function e(){var t,a;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=[],e.next=4,K.a.get("https://facialrecognition-1.herokuapp.com/api/machineCondition");case 4:a=e.sent,(a=JSON.parse(a.data)).data.map((function(e,n){var r=new Date(a.index[n]);r=r.toJSON().split("T")[0],t.push({label:r,value:e[0],threshold:e[1]})})),console.log("state of arr=-===>",t),c({type:"MACHINE_CONDITION",payload:t}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log("error",e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=Object(ce.a)(le.a.mark((function e(){var t;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,K.a.get("https://facialrecognition-1.herokuapp.com/api/graphs");case 3:t=e.sent,c({type:"GRAPH_API",payload:t.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("error");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=Object(ce.a)(le.a.mark((function e(){var t;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ie.get("/api/dataset");case 3:t=e.sent,c({type:"GET_MEDITIONS",payload:t.data.dataset}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("error");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(R.Provider,{value:{chartsitem:l.chartsitem,chartselected:l.chartselected,dataset:l.dataset,getCharts:s,getDataset:u,machineConditionData:l.machineConditionData,graphApiData:l.graphApiData,getMachineCondition:o,getGraphApi:i}},e.children)},Xe=function(e,t){switch(t.type){case"SHOW_DASHBOARD":return Object(f.a)({},e,{dashboard:"showing"});case"HIDE_DASHBOARD":return{dashboard:null};default:return e}},Je=function(e){var t=Object(n.useReducer)(Xe,{dashboard:"showing"}),a=Object(v.a)(t,2),l=a[0],c=a[1];return r.a.createElement(d.Provider,{value:{dashboard:l.dashboard,showDashboard:function(){c({type:"SHOW_DASHBOARD"})},hideDashboard:function(){c({type:"HIDE_DASHBOARD"})}}},e.children)},Ke=a(81),Qe=function(e){var t=e.component,a=Object(Ke.a)(e,["component"]),l=Object(n.useContext)(p),c=l.autenticado,s=l.cargando,i=l.usuarioAutenticado;return Object(n.useEffect)((function(){i()}),[]),r.a.createElement(o.b,Object.assign({},a,{render:function(e){return c||s?r.a.createElement(t,e):r.a.createElement(o.a,{to:"/"})}}))},$e=localStorage.getItem("token");$e&&Le($e);var Ze=function(){return r.a.createElement(Je,null,r.a.createElement(Be,null,r.a.createElement(ze,null,r.a.createElement(qe,null,r.a.createElement(_e,null,r.a.createElement(We,null,r.a.createElement(s.a,null,r.a.createElement(o.d,null,r.a.createElement(o.b,{exact:!0,path:"/",component:b}),r.a.createElement(o.b,{exact:!0,path:"/dashboard",component:Pe}),r.a.createElement(o.b,{exact:!0,path:"/dashboard#",component:Pe}),r.a.createElement(o.b,{exact:!0,path:"/fault-prediction",component:Ue}),r.a.createElement(o.b,{exact:!0,path:"/energy-optimization",component:ke}),r.a.createElement(o.b,{exact:!0,path:"/sign-in",component:T}),r.a.createElement(o.b,{exact:!0,path:"/register",component:O}),r.a.createElement(Qe,{exact:!0,path:"/admin",component:ne}),r.a.createElement(o.a,{from:"*",to:"/"})))))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(Ze,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},86:function(e,t,a){e.exports=a(122)},91:function(e,t,a){},92:function(e,t,a){}},[[86,1,2]]]);
//# sourceMappingURL=main.6c3e1d35.chunk.js.map